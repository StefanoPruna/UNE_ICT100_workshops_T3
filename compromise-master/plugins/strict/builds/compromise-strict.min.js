!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).compromiseStrict=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}var d="7.0.3";function v(t){return t&&0===t.length}function m(t){return null==t?[]:Object.keys(t)}function y(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}function T(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function E(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e=e.concat(E(r)):e.push(r)}return e}function g(t){return v(t)?void 0:t[0]}function A(t){var e=t&&t.length;return e?t[e-1]:void 0}function R(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!j(t))throw Error("non exhaustive match");var r=m(t);for(n=0;n<r.length;n++){var o=r[n],i=t[o];e.call(null,i,o)}}}function O(t){return"string"==typeof t}function N(t){return void 0===t}function I(t){return t instanceof Function}function _(t,e){return void 0===e&&(e=1),t.slice(e,t.length)}function S(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)}function L(t,e){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];e.call(null,o)&&n.push(o)}return n}function k(t,e){return L(t,(function(t){return!e(t)}))}function C(t,e){for(var n=Object.keys(t),r={},o=0;o<n.length;o++){var i=n[o],a=t[i];e(a)&&(r[i]=a)}return r}function P(t,e){return!!j(t)&&t.hasOwnProperty(e)}function x(t,e){return void 0!==w(t,(function(t){return t===e}))}function b(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function M(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function w(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e.call(null,r))return r}}function U(t,e,n){for(var r=Array.isArray(t),o=r?t:y(t),i=r?[]:m(t),a=n,s=0;s<o.length;s++)a=e.call(null,a,o[s],r?s:i[s]);return a}function D(t){return k(t,(function(t){return null==t}))}function F(t,e){void 0===e&&(e=function(t){return t});var n=[];return U(t,(function(t,r){var o=e(r);return x(n,o)?t:(n.push(o),t.concat(r))}),[])}function G(t){return Array.isArray(t)}function B(t){return t instanceof RegExp}function j(t){return t instanceof Object}function K(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function H(t,e){return k(t,(function(t){return x(e,t)}))}function W(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function V(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var o=e[r],i=m(o),a=0;a<i.length;a++){var s=i[a];t[s]=o[s]}return t}function Y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var o=e[r],i=m(o),a=0;a<i.length;a++){var s=i[a];P(t,s)||(t[s]=o[s])}return t}function z(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y.apply(null,[{}].concat(t))}function X(t,e){for(var n=M(t),r=m(e),o=0;o<r.length;o++){var i=r[o],a=e[i];n[i]=a}return n}function q(){}function $(t){return t}function J(t){console&&console.error&&console.error("Error: "+t)}function Z(t){console&&console.warn&&console.warn("Warning: "+t)}function Q(){return"function"==typeof Map}function tt(e){function n(){}n.prototype=e;var r=new n;function o(){return t(r.bar)}return o(),o(),e}function et(t){return t[t.length-1]}function nt(t){var e=(new Date).getTime(),n=t();return{time:(new Date).getTime()-e,value:n}}var rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ot(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var it=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t){var e,n;e="undefined"!=typeof self?self:rt,n=function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx},t.prototype.pattern=function(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");var e=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":s(n,"global");break;case"i":s(n,"ignoreCase");break;case"m":s(n,"multiLine");break;case"u":s(n,"unicode");break;case"y":s(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e,loc:this.loc(0)}},t.prototype.disjunction=function(){var t=[],e=this.idx;for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(e)}},t.prototype.alternative=function(){for(var t=[],e=this.idx;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(e)}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){var t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":var e;switch(this.consumeChar("?"),this.popChar()){case"=":e="Lookahead";break;case"!":e="NegativeLookahead"}c(e);var n=this.disjunction();return this.consumeChar(")"),{type:e,value:n,loc:this.loc(t)}}!function(){throw Error("Internal Error - Should never get here!")}()},t.prototype.quantifier=function(t){var e,n=this.idx;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":var r=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:r,atMost:r};break;case",":e=this.isDigit()?{atLeast:r,atMost:this.integerIncludingZero()}:{atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;c(e)}if(!0!==t||void 0!==e)return c(e),"?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e.loc=this.loc(n),e},t.prototype.atom=function(){var t,e=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),c(t),t.loc=this.loc(e),this.isQuantifier()&&(t.quantifier=this.quantifier()),t},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[i("\n"),i("\r"),i("\u2028"),i("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},t.prototype.characterClassEscape=function(){var t,e=!1;switch(this.popChar()){case"d":t=u;break;case"D":t=u,e=!0;break;case"s":t=p;break;case"S":t=p,e=!0;break;case"w":t=l;break;case"W":t=l,e=!0}return c(t),{type:"Set",value:t,complement:e}},t.prototype.controlEscapeAtom=function(){var t;switch(this.popChar()){case"f":t=i("\f");break;case"n":t=i("\n");break;case"r":t=i("\r");break;case"t":t=i("\t");break;case"v":t=i("\v")}return c(t),{type:"Character",value:t}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:i("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){return{type:"Character",value:i(this.popChar())}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:i(this.popChar())}}},t.prototype.characterClass=function(){var t=[],e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){var n=this.classAtom();if("Character"===n.type&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if("Character"===r.type){if(r.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:r.value})}else a(n.value,t),t.push(i("-")),a(r.value,t)}else a(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:i("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++}var e=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n},t.prototype.positiveInteger=function(){var t=this.popChar();if(!1===o.test(t))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.integerIncludingZero=function(){var t=this.popChar();if(!1===r.test(t))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.patternCharacter=function(){var t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:i(t)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},t.prototype.isDigit=function(){return r.test(this.peekChar(0))},t.prototype.isClassAtom=function(t){switch(void 0===t&&(t=0),this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},t.prototype.isQuantifier=function(){var t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(t){for(var e="",r=0;r<t;r++){var o=this.popChar();if(!1===n.test(o))throw Error("Expecting a HexDecimal digits");e+=o}return{type:"Character",value:parseInt(e,16)}},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.input[this.idx+t]},t.prototype.popChar=function(){var t=this.peekChar(0);return this.consumeChar(),t},t.prototype.consumeChar=function(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},t.prototype.loc=function(t){return{begin:t,end:this.idx}};var e,n=/[0-9a-fA-F]/,r=/[0-9]/,o=/[1-9]/;function i(t){return t.charCodeAt(0)}function a(t,e){void 0!==t.length?t.forEach((function(t){e.push(t)})):e.push(t)}function s(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e]=!0}function c(t){if(void 0===t)throw Error("Internal Error - Should never get here!")}var u=[];for(e=i("0");e<=i("9");e++)u.push(e);var l=[i("_")].concat(u);for(e=i("a");e<=i("z");e++)l.push(e);for(e=i("A");e<=i("Z");e++)l.push(e);var p=[i(" "),i("\f"),i("\n"),i("\r"),i("\t"),i("\v"),i("\t"),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i(" "),i("\u2028"),i("\u2029"),i(" "),i(" "),i("　"),i("\ufeff")];function f(){}return f.prototype.visitChildren=function(t){for(var e in t){var n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((function(t){this.visit(t)}),this))}},f.prototype.visit=function(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)},f.prototype.visitPattern=function(t){},f.prototype.visitFlags=function(t){},f.prototype.visitDisjunction=function(t){},f.prototype.visitAlternative=function(t){},f.prototype.visitStartAnchor=function(t){},f.prototype.visitEndAnchor=function(t){},f.prototype.visitWordBoundary=function(t){},f.prototype.visitNonWordBoundary=function(t){},f.prototype.visitLookahead=function(t){},f.prototype.visitNegativeLookahead=function(t){},f.prototype.visitCharacter=function(t){},f.prototype.visitSet=function(t){},f.prototype.visitGroup=function(t){},f.prototype.visitGroupBackReference=function(t){},f.prototype.visitQuantifier=function(t){},{RegExpParser:t,BaseRegExpVisitor:f,VERSION:"0.5.0"}},t.exports?t.exports=n():e.regexpToAst=n()})),at={},st=new it.RegExpParser;function ct(t){var e=t.toString();if(at.hasOwnProperty(e))return at[e];var n=st.pattern(e);return at[e]=n,n}var ut,lt=(ut=function(t,e){return(ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ut(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),pt="Complement Sets are not supported for first char optimization",ft='Unable to use "first char" lexer optimizations:\n';function ht(t,e){void 0===e&&(e=!1);try{var n=ct(t);return dt(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===pt)e&&Z(ft+"\tUnable to optimize: < "+t.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var r="";e&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),J(ft+"\n\tFailed parsing: < "+t.toString()+" >\n\tUsing the regexp-to-ast library version: "+it.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+r)}}return[]}function dt(t,e,n){switch(t.type){case"Disjunction":for(var r=0;r<t.value.length;r++)dt(t.value[r],e,n);break;case"Alternative":var o=t.value;for(r=0;r<o.length;r++){var i=o[r];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var a=i;switch(a.type){case"Character":vt(a.value,e,n);break;case"Set":if(!0===a.complement)throw Error(pt);R(a.value,(function(t){if("number"==typeof t)vt(t,e,n);else{var r=t;if(!0===n)for(var o=r.from;o<=r.to;o++)vt(o,e,n);else{for(o=r.from;o<=r.to&&o<Ft;o++)vt(o,e,n);if(r.to>=Ft)for(var i=r.from>=Ft?r.from:Ft,a=r.to,s=Gt(i),c=Gt(a),u=s;u<=c;u++)e[u]=u}}}));break;case"Group":dt(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}var s=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===yt(a)||"Group"!==a.type&&!1===s)break}break;default:throw Error("non exhaustive match!")}return y(e)}function vt(t,e,n){var r=Gt(t);e[r]=r,!0===n&&function(t,e){var n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){e[o=Gt(r.charCodeAt(0))]=o}else{var o,i=n.toLowerCase();if(i!==n)e[o=Gt(i.charCodeAt(0))]=o}}(t,e)}function mt(t,e){return w(t.value,(function(t){if("number"==typeof t)return x(e,t);var n=t;return void 0!==w(e,(function(t){return n.from<=t&&t<=n.to}))}))}function yt(t){return!(!t.quantifier||0!==t.quantifier.atLeast)||!!t.value&&(G(t.value)?K(t.value,yt):yt(t.value))}var Tt=function(t){function e(e){var n=t.call(this)||this;return n.targetCharCodes=e,n.found=!1,n}return lt(e,t),e.prototype.visitChildren=function(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}t.prototype.visitChildren.call(this,e)}},e.prototype.visitCharacter=function(t){x(this.targetCharCodes,t.value)&&(this.found=!0)},e.prototype.visitSet=function(t){t.complement?void 0===mt(t,this.targetCharCodes)&&(this.found=!0):void 0!==mt(t,this.targetCharCodes)&&(this.found=!0)},e}(it.BaseRegExpVisitor);function Et(t,e){if(e instanceof RegExp){var n=ct(e),r=new Tt(t);return r.visit(n),r.found}return void 0!==w(e,(function(e){return x(t,e.charCodeAt(0))}))}var gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),At="PATTERN",Rt="defaultMode",Ot="modes",Nt="boolean"==typeof new RegExp("(?:)").sticky;function It(t,e){var n,r=(e=z(e,{useSticky:Nt,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(t,e){return e()}})).tracer;r("initCharCodeToOptimizedIndexMap",(function(){!function(){if(v(Bt)){Bt=new Array(65536);for(var t=0;t<65536;t++)Bt[t]=t>255?255+~~(t/255):t}}()})),r("Reject Lexer.NA",(function(){n=k(t,(function(t){return t.PATTERN===Qt.NA}))}));var o,i,a,s,c,u,l,p,f,h,d,m=!1;r("Transform Patterns",(function(){m=!1,o=T(n,(function(t){var n=t.PATTERN;if(B(n)){var r=n.source;return 1!==r.length||"^"===r||"$"===r||"."===r||n.ignoreCase?2!==r.length||"\\"!==r[0]||x(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?e.useSticky?Ct(n):kt(n):r[1]:r}if(I(n))return m=!0,{exec:n};if(P(n,"exec"))return m=!0,n;if("string"==typeof n){if(1===n.length)return n;var o=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=new RegExp(o);return e.useSticky?Ct(i):kt(i)}throw Error("non exhaustive match")}))})),r("misc mapping",(function(){i=T(n,(function(t){return t.tokenTypeIdx})),a=T(n,(function(t){var e=t.GROUP;if(e!==Qt.SKIPPED){if(O(e))return e;if(N(e))return!1;throw Error("non exhaustive match")}})),s=T(n,(function(t){var e=t.LONGER_ALT;if(e)return function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}(n,e)})),c=T(n,(function(t){return t.PUSH_MODE})),u=T(n,(function(t){return P(t,"POP_MODE")}))})),r("Line Terminator Handling",(function(){var t=Ut(e.lineTerminatorCharacters);l=T(n,(function(t){return!1})),"onlyOffset"!==e.positionTracking&&(l=T(n,(function(e){return P(e,"LINE_BREAKS")?e.LINE_BREAKS:!1===wt(e,t)?Et(t,e.PATTERN):void 0})))})),r("Misc Mapping #2",(function(){p=T(n,xt),f=T(o,bt),h=U(n,(function(t,e){var n=e.GROUP;return O(n)&&n!==Qt.SKIPPED&&(t[n]=[]),t}),{}),d=T(o,(function(t,e){return{pattern:o[e],longerAlt:s[e],canLineTerminator:l[e],isCustom:p[e],short:f[e],group:a[e],push:c[e],pop:u[e],tokenTypeIdx:i[e],tokenType:n[e]}}))}));var y=!0,E=[];return e.safeMode||r("First Char Optimization",(function(){E=U(n,(function(t,n,r){if("string"==typeof n.PATTERN){var o=Gt(n.PATTERN.charCodeAt(0));Dt(t,o,d[r])}else if(G(n.START_CHARS_HINT)){var i;R(n.START_CHARS_HINT,(function(e){var n=Gt("string"==typeof e?e.charCodeAt(0):e);i!==n&&(i=n,Dt(t,n,d[r]))}))}else if(B(n.PATTERN))if(n.PATTERN.unicode)y=!1,e.ensureOptimizations&&J(ft+"\tUnable to analyze < "+n.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var a=ht(n.PATTERN,e.ensureOptimizations);v(a)&&(y=!1),R(a,(function(e){Dt(t,e,d[r])}))}else e.ensureOptimizations&&J(ft+"\tTokenType: <"+n.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),y=!1;return t}),[])})),r("ArrayPacking",(function(){E=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(void 0!==r?r:void 0)}return e}(E)})),{emptyGroups:h,patternIdxToConfig:d,charCodeToPatternIdxToConfig:E,hasCustom:m,canBeOptimized:y}}function _t(t,e){var n=[],r=function(t){var e=L(t,(function(t){return!P(t,At)})),n=T(e,(function(t){return{message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:$t.MISSING_PATTERN,tokenTypes:[t]}})),r=H(t,e);return{errors:n,valid:r}}(t);n=n.concat(r.errors);var o=function(t){var e=L(t,(function(t){var e=t.PATTERN;return!(B(e)||I(e)||P(e,"exec")||O(e))})),n=T(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:$t.INVALID_PATTERN,tokenTypes:[t]}})),r=H(t,e);return{errors:n,valid:r}}(r.valid),i=o.valid;return n=(n=(n=(n=(n=n.concat(o.errors)).concat(function(t){var e=[],n=L(t,(function(t){return B(t.PATTERN)}));return e=(e=(e=(e=(e=e.concat(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return gt(e,t),e.prototype.visitEndAnchor=function(t){this.found=!0},e}(it.BaseRegExpVisitor);return T(L(t,(function(t){var n=t.PATTERN;try{var r=ct(n),o=new e;return o.visit(r),o.found}catch(t){return St.test(n.source)}})),(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:$t.EOI_ANCHOR_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return gt(e,t),e.prototype.visitStartAnchor=function(t){this.found=!0},e}(it.BaseRegExpVisitor);return T(L(t,(function(t){var n=t.PATTERN;try{var r=ct(n),o=new e;return o.visit(r),o.found}catch(t){return Lt.test(n.source)}})),(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:$t.SOI_ANCHOR_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){return T(L(t,(function(t){var e=t.PATTERN;return e instanceof RegExp&&(e.multiline||e.global)})),(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:$t.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=[],n=T(t,(function(n){return U(t,(function(t,r){return n.PATTERN.source!==r.PATTERN.source||x(e,r)||r.PATTERN===Qt.NA||(e.push(r),t.push(r)),t}),[])}));return T(L(n=D(n),(function(t){return t.length>1})),(function(t){var e=T(t,(function(t){return t.name}));return{message:"The same RegExp pattern ->"+g(t).PATTERN+"<-has been used in all of the following Token Types: "+e.join(", ")+" <-",type:$t.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}(n))).concat(function(t){return T(L(t,(function(t){return t.PATTERN.test("")})),(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:$t.EMPTY_MATCH_PATTERN,tokenTypes:[t]}}))}(n))}(i))).concat(function(t){return T(L(t,(function(t){if(!P(t,"GROUP"))return!1;var e=t.GROUP;return e!==Qt.SKIPPED&&e!==Qt.NA&&!O(e)})),(function(t){return{message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:$t.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}}))}(i))).concat(function(t,e){return T(L(t,(function(t){return void 0!==t.PUSH_MODE&&!x(e,t.PUSH_MODE)})),(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+t.PUSH_MODE+"<-which does not exist",type:$t.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}}))}(i,e))).concat(function(t){var e=[],n=U(t,(function(t,e,n){var r,o=e.PATTERN;return o===Qt.NA||(O(o)?t.push({str:o,idx:n,tokenType:e}):B(o)&&(r=o,void 0===w([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(function(t){return-1!==r.source.indexOf(t)})))&&t.push({str:o.source,idx:n,tokenType:e})),t}),[]);return R(t,(function(t,r){R(n,(function(n){var o=n.str,i=n.idx,a=n.tokenType;if(r<i&&function(t,e){if(B(e)){var n=e.exec(t);return null!==n&&0===n.index}if(I(e))return e(t,0,[],{});if(P(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(o,t.PATTERN)){var s="Token: ->"+a.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+t.name+"<-in the lexer's definition.\nSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE";e.push({message:s,type:$t.UNREACHABLE_PATTERN,tokenTypes:[t,a]})}}))})),e}(i))}var St=/[^\\][\$]/;var Lt=/[^\\[][\^]|^\^/;function kt(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function Ct(t){var e=t.ignoreCase?"iy":"y";return new RegExp(""+t.source,e)}function Pt(t,e,n){var r=[],o=!1,i=k(D(E(function(t,e){for(var n=[],r=m(t),o=0;o<r.length;o++){var i=r[o];n.push(e.call(null,t[i],i))}return n}(t.modes,(function(t){return t})))),(function(t){return t.PATTERN===Qt.NA})),a=Ut(n);return e&&R(i,(function(t){var e=wt(t,a);if(!1!==e){var n={message:function(t,e){if(e.issue===$t.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+t.name+"> Token Type\n\t Root cause: "+e.errMsg+".\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(e.issue===$t.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+t.name+"> Token Type\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}(t,e),type:e.issue,tokenType:t};r.push(n)}else P(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(o=!0):Et(a,t.PATTERN)&&(o=!0)})),e&&!o&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:$t.NO_LINE_BREAKS_FLAGS}),r}function xt(t){var e=t.PATTERN;if(B(e))return!1;if(I(e))return!0;if(P(e,"exec"))return!0;if(O(e))return!1;throw Error("non exhaustive match")}function bt(t){return!(!O(t)||1!==t.length)&&t.charCodeAt(0)}var Mt={test:function(t){for(var e=t.length,n=this.lastIndex;n<e;n++){var r=t.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function wt(t,e){if(P(t,"LINE_BREAKS"))return!1;if(B(t.PATTERN)){try{Et(e,t.PATTERN)}catch(t){return{issue:$t.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(O(t.PATTERN))return!1;if(xt(t))return{issue:$t.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function Ut(t){return T(t,(function(t){return O(t)&&t.length>0?t.charCodeAt(0):t}))}function Dt(t,e,n){void 0===t[e]?t[e]=[n]:t[e].push(n)}var Ft=256;function Gt(t){return t<Ft?t:Bt[t]}var Bt=[];function jt(t,e){var n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function Kt(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var Ht=1,Wt={};function Vt(t){var e=function(t){var e=b(t),n=t,r=!0;for(;r;){var o=H(n=D(E(T(n,(function(t){return t.CATEGORIES})))),e);e=e.concat(o),v(o)?r=!1:n=o}return e}(t);!function(t){R(t,(function(t){zt(t)||(Wt[Ht]=t,t.tokenTypeIdx=Ht++),Xt(t)&&!G(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),Xt(t)||(t.CATEGORIES=[]),P(t,"categoryMatches")||(t.categoryMatches=[]),function(t){return P(t,"categoryMatchesMap")}(t)||(t.categoryMatchesMap={})}))}(e),function(t){R(t,(function(t){Yt([],t)}))}(e),function(t){R(t,(function(t){t.categoryMatches=[],R(t.categoryMatchesMap,(function(e,n){t.categoryMatches.push(Wt[n].tokenTypeIdx)}))}))}(e),R(e,(function(t){t.isParent=t.categoryMatches.length>0}))}function Yt(t,e){R(t,(function(t){e.categoryMatchesMap[t.tokenTypeIdx]=!0})),R(e.CATEGORIES,(function(n){var r=t.concat(e);x(r,n)||Yt(r,n)}))}function zt(t){return P(t,"tokenTypeIdx")}function Xt(t){return P(t,"CATEGORIES")}function qt(t){return P(t,"tokenTypeIdx")}var $t,Jt={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,n,r,o){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+", skipped "+n+" characters."}};!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"}($t||($t={}));var Zt={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Jt,traceInitPerf:!1,skipValidations:!1};Object.freeze(Zt);var Qt=function(){function t(t,e){var n=this;if(void 0===e&&(e=Zt),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=X(Zt,e);var r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var r,o=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===Zt.lineTerminatorsPattern)n.config.lineTerminatorsPattern=Mt;else if(n.config.lineTerminatorCharacters===Zt.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),G(t)?((r={modes:{}}).modes.defaultMode=b(t),r.defaultMode=Rt):(o=!1,r=M(t))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(function(t,e,n){var r=[];return P(t,Rt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <defaultMode> property in its definition\n",type:$t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),P(t,Ot)||r.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:$t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),P(t,Ot)&&P(t,Rt)&&!P(t.modes,t.defaultMode)&&r.push({message:"A MultiMode Lexer cannot be initialized with a defaultMode: <"+t.defaultMode+">which does not exist\n",type:$t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),P(t,Ot)&&R(t.modes,(function(t,e){R(t,(function(t,n){N(t)&&r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+e+"> at index: <"+n+">\n",type:$t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),r}(r,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(Pt(r,n.trackStartLines,n.config.lineTerminatorCharacters))}))),r.modes=r.modes?r.modes:{},R(r.modes,(function(t,e){r.modes[e]=k(t,(function(t){return N(t)}))}));var i=m(r.modes);if(R(r.modes,(function(t,r){n.TRACE_INIT("Mode: <"+r+"> processing",(function(){var o;(n.modes.push(r),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(_t(t,i))})),v(n.lexerDefinitionErrors))&&(Vt(t),n.TRACE_INIT("analyzeTokenTypes",(function(){o=It(t,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:n.TRACE_INIT.bind(n)})})),n.patternIdxToConfig[r]=o.patternIdxToConfig,n.charCodeToPatternIdxToConfig[r]=o.charCodeToPatternIdxToConfig,n.emptyGroups=X(n.emptyGroups,o.emptyGroups),n.hasCustom=o.hasCustom||n.hasCustom,n.canModeBeOptimized[r]=o.canBeOptimized)}))})),n.defaultMode=r.defaultMode,!v(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var a=T(n.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+a)}R(n.lexerDefinitionWarning,(function(t){Z(t.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(Nt?(n.chopInput=$,n.match=n.matchWithTest):(n.updateLastIndex=q,n.match=n.matchWithExec),o&&(n.handleModes=q),!1===n.trackStartLines&&(n.computeNewColumn=$),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=q),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+n.config.positionTracking+'"');n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var t=U(n.canModeBeOptimized,(function(t,e,n){return!1===e&&t.push(n),t}),[]);if(e.ensureOptimizations&&!v(t))throw Error("Lexer Modes: < "+t.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),n.TRACE_INIT("clearRegExpParserCache",(function(){at={}})),n.TRACE_INIT("toFastProperties",(function(){tt(n)}))}))}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!v(this.lexerDefinitionErrors)){var n=T(this.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){var n,r,o,i,a,s,c,u,l,p,f,h,d,v,y,T,E=this,g=t,O=g.length,N=0,I=0,_=this.hasCustom?0:Math.floor(t.length/10),S=new Array(_),L=[],k=this.trackStartLines?1:void 0,C=this.trackStartLines?1:void 0,P=(y=this.emptyGroups,T={},R(m(y),(function(t){if(!G(y[t]))throw Error("non exhaustive match");T[t]=[]})),T),x=this.trackStartLines,b=this.config.lineTerminatorsPattern,M=0,w=[],U=[],D=[],F=[];Object.freeze(F);var B=void 0;function j(){return w}function K(t){var e=Gt(t),n=U[e];return void 0===n?F:n}var H,W=function(t){if(1===D.length&&void 0===t.tokenType.PUSH_MODE){var e=E.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);L.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{D.pop();var n=A(D);w=E.patternIdxToConfig[n],U=E.charCodeToPatternIdxToConfig[n],M=w.length;var r=E.canModeBeOptimized[n]&&!1===E.config.safeMode;B=U&&r?K:j}};function V(t){D.push(t),U=this.charCodeToPatternIdxToConfig[t],w=this.patternIdxToConfig[t],M=w.length,M=w.length;var e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;B=U&&e?K:j}for(V.call(this,e);N<O;){a=null;var Y=g.charCodeAt(N),z=B(Y),X=z.length;for(n=0;n<X;n++){var q=(H=z[n]).pattern;if(s=null,!1!==(it=H.short)?Y===it&&(a=q):!0===H.isCustom?null!==(v=q.exec(g,N,S,P))?(a=v[0],void 0!==v.payload&&(s=v.payload)):a=null:(this.updateLastIndex(q,N),a=this.match(q,t,N)),null!==a){if(void 0!==(i=H.longerAlt)){var $=w[i],J=$.pattern;c=null,!0===$.isCustom?null!==(v=J.exec(g,N,S,P))?(o=v[0],void 0!==v.payload&&(c=v.payload)):o=null:(this.updateLastIndex(J,N),o=this.match(J,t,N)),o&&o.length>a.length&&(a=o,s=c,H=$)}break}}if(null!==a){if(u=a.length,void 0!==(l=H.group)&&(p=H.tokenTypeIdx,f=this.createTokenInstance(a,N,p,H.tokenType,k,C,u),this.handlePayload(f,s),!1===l?I=this.addToken(S,I,f):P[l].push(f)),t=this.chopInput(t,u),N+=u,C=this.computeNewColumn(C,u),!0===x&&!0===H.canLineTerminator){var Z=0,Q=void 0,tt=void 0;b.lastIndex=0;do{!0===(Q=b.test(a))&&(tt=b.lastIndex-1,Z++)}while(!0===Q);0!==Z&&(k+=Z,C=u-tt,this.updateTokenEndLineColumnLocation(f,l,tt,Z,k,C,u))}this.handleModes(H,W,V,f)}else{for(var et=N,nt=k,rt=C,ot=!1;!ot&&N<O;)for(g.charCodeAt(N),t=this.chopInput(t,1),N++,r=0;r<M;r++){var it,at=w[r];q=at.pattern;if(!1!==(it=at.short)?g.charCodeAt(N)===it&&(ot=!0):!0===at.isCustom?ot=null!==q.exec(g,N,S,P):(this.updateLastIndex(q,N),ot=null!==q.exec(t)),!0===ot)break}h=N-et,d=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(g,et,h,nt,rt),L.push({offset:et,line:nt,column:rt,length:h,message:d})}}return this.hasCustom||(S.length=I),{tokens:S,groups:P,errors:L}},t.prototype.handleModes=function(t,e,n,r){if(!0===t.pop){var o=t.push;e(r),void 0!==o&&n.call(this,o)}else void 0!==t.push&&n.call(this,t.push)},t.prototype.chopInput=function(t,e){return t.substring(e)},t.prototype.updateLastIndex=function(t,e){t.lastIndex=e},t.prototype.updateTokenEndLineColumnLocation=function(t,e,n,r,o,i,a){var s,c;void 0!==e&&(c=(s=n===a-1)?-1:0,1===r&&!0===s||(t.endLine=o+c,t.endColumn=i-1-c))},t.prototype.computeNewColumn=function(t,e){return t+e},t.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},t.prototype.createOffsetOnlyToken=function(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}},t.prototype.createStartOnlyToken=function(t,e,n,r,o,i){return{image:t,startOffset:e,startLine:o,startColumn:i,tokenTypeIdx:n,tokenType:r}},t.prototype.createFullToken=function(t,e,n,r,o,i,a){return{image:t,startOffset:e,endOffset:e+a-1,startLine:o,endLine:o,startColumn:i,endColumn:i+a-1,tokenTypeIdx:n,tokenType:r}},t.prototype.addToken=function(t,e,n){return 666},t.prototype.addTokenUsingPush=function(t,e,n){return t.push(n),e},t.prototype.addTokenUsingMemberAccess=function(t,e,n){return t[e]=n,++e},t.prototype.handlePayload=function(t,e){},t.prototype.handlePayloadNoCustom=function(t,e){},t.prototype.handlePayloadWithCustom=function(t,e){null!==e&&(t.payload=e)},t.prototype.match=function(t,e,n){return null},t.prototype.matchWithTest=function(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null},t.prototype.matchWithExec=function(t,e){var n=t.exec(e);return null!==n?n[0]:n},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+t+">");var r=nt(e),o=r.time,i=r.value,a=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(n+"<-- <"+t+"> time: "+o+"ms"),this.traceInitIndent--,i}return e()},t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t}();function te(t){return ee(t)?t.LABEL:t.name}function ee(t){return O(t.LABEL)&&""!==t.LABEL}var ne="parent",re="categories",oe="label",ie="group",ae="push_mode",se="pop_mode",ce="longer_alt",ue="line_breaks",le="start_chars_hint";function pe(t){return function(t){var e=t.pattern,n={};n.name=t.name,N(e)||(n.PATTERN=e);if(P(t,ne))throw"The parent property is no longer supported.\nSee: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.";P(t,re)&&(n.CATEGORIES=t.categories);Vt([n]),P(t,oe)&&(n.LABEL=t.label);P(t,ie)&&(n.GROUP=t.group);P(t,se)&&(n.POP_MODE=t.pop_mode);P(t,ae)&&(n.PUSH_MODE=t.push_mode);P(t,ce)&&(n.LONGER_ALT=t.longer_alt);P(t,ue)&&(n.LINE_BREAKS=t.line_breaks);P(t,le)&&(n.START_CHARS_HINT=t.start_chars_hint);return n}(t)}var fe=pe({name:"EOF",pattern:Qt.NA});function he(t,e,n,r,o,i,a,s){return{image:e,startOffset:n,endOffset:r,startLine:o,endLine:i,startColumn:a,endColumn:s,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}Vt([fe]);var de=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ve=function(){function t(t){this._definition=t}return Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t},enumerable:!1,configurable:!0}),t.prototype.accept=function(t){t.visit(this),R(this.definition,(function(e){e.accept(t)}))},t}(),me=function(t){function e(e){var n=t.call(this,[])||this;return n.idx=1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(ve),ye=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.orgText="",V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),Te=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.ignoreAmbiguities=!1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),Ee=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),ge=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),Ae=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),Re=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),Oe=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),e}(ve),Ne=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,V(n,C(e,(function(t){return void 0!==t}))),n}return de(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t},enumerable:!1,configurable:!0}),e}(ve),Ie=function(){function t(t){this.idx=1,V(this,C(t,(function(t){return void 0!==t})))}return t.prototype.accept=function(t){t.visit(this)},t}();function _e(t){return T(t,Se)}function Se(t){function e(t){return T(t,Se)}if(t instanceof me)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof Te)return{type:"Alternative",definition:e(t.definition)};if(t instanceof Ee)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof ge)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Ae)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Se(new Ie({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Oe)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Se(new Ie({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Re)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof Ne)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Ie){var n={type:"Terminal",name:t.terminalType.name,label:te(t.terminalType),idx:t.idx},r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=B(r)?r.source:r),n}if(t instanceof ye)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}var Le=function(){function t(){}return t.prototype.walk=function(t,e){var n=this;void 0===e&&(e=[]),R(t.definition,(function(r,o){var i=_(t.definition,o+1);if(r instanceof me)n.walkProdRef(r,i,e);else if(r instanceof Ie)n.walkTerminal(r,i,e);else if(r instanceof Te)n.walkFlat(r,i,e);else if(r instanceof Ee)n.walkOption(r,i,e);else if(r instanceof ge)n.walkAtLeastOne(r,i,e);else if(r instanceof Ae)n.walkAtLeastOneSep(r,i,e);else if(r instanceof Oe)n.walkManySep(r,i,e);else if(r instanceof Re)n.walkMany(r,i,e);else{if(!(r instanceof Ne))throw Error("non exhaustive match");n.walkOr(r,i,e)}}))},t.prototype.walkTerminal=function(t,e,n){},t.prototype.walkProdRef=function(t,e,n){},t.prototype.walkFlat=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkOption=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkAtLeastOne=function(t,e,n){var r=[new Ee({definition:t.definition})].concat(e,n);this.walk(t,r)},t.prototype.walkAtLeastOneSep=function(t,e,n){var r=ke(t,e,n);this.walk(t,r)},t.prototype.walkMany=function(t,e,n){var r=[new Ee({definition:t.definition})].concat(e,n);this.walk(t,r)},t.prototype.walkManySep=function(t,e,n){var r=ke(t,e,n);this.walk(t,r)},t.prototype.walkOr=function(t,e,n){var r=this,o=e.concat(n);R(t.definition,(function(t){var e=new Te({definition:[t]});r.walk(e,o)}))},t}();function ke(t,e,n){return[new Ee({definition:[new Ie({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}var Ce=function(){function t(){}return t.prototype.visit=function(t){var e=t;switch(e.constructor){case me:return this.visitNonTerminal(e);case Te:return this.visitAlternative(e);case Ee:return this.visitOption(e);case ge:return this.visitRepetitionMandatory(e);case Ae:return this.visitRepetitionMandatoryWithSeparator(e);case Oe:return this.visitRepetitionWithSeparator(e);case Re:return this.visitRepetition(e);case Ne:return this.visitAlternation(e);case Ie:return this.visitTerminal(e);case ye:return this.visitRule(e);default:throw Error("non exhaustive match")}},t.prototype.visitNonTerminal=function(t){},t.prototype.visitAlternative=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}(),Pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function xe(t,e){return void 0===e&&(e=[]),!!(t instanceof Ee||t instanceof Re||t instanceof Oe)||(t instanceof Ne?W(t.definition,(function(t){return xe(t,e)})):!(t instanceof me&&x(e,t))&&(t instanceof ve&&(t instanceof me&&e.push(t),K(t.definition,(function(t){return xe(t,e)})))))}function be(t){if(t instanceof me)return"SUBRULE";if(t instanceof Ee)return"OPTION";if(t instanceof Ne)return"OR";if(t instanceof ge)return"AT_LEAST_ONE";if(t instanceof Ae)return"AT_LEAST_ONE_SEP";if(t instanceof Oe)return"MANY_SEP";if(t instanceof Re)return"MANY";if(t instanceof Ie)return"CONSUME";throw Error("non exhaustive match")}var Me=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.separator="-",e.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return Pe(e,t),e.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},e.prototype.visitTerminal=function(t){var e=t.terminalType.name+this.separator+"Terminal";P(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitNonTerminal=function(t){var e=t.nonTerminalName+this.separator+"Terminal";P(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitOption=function(t){this.dslMethods.option.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.dslMethods.repetitionWithSeparator.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.dslMethods.repetitionMandatory.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)},e.prototype.visitRepetition=function(t){this.dslMethods.repetition.push(t)},e.prototype.visitAlternation=function(t){this.dslMethods.alternation.push(t)},e}(Ce),we=new Me;function Ue(t){if(t instanceof me)return Ue(t.referencedRule);if(t instanceof Ie)return[t.terminalType];if(function(t){return t instanceof Te||t instanceof Ee||t instanceof Re||t instanceof ge||t instanceof Ae||t instanceof Oe||t instanceof Ie||t instanceof ye}(t))return function(t){var e,n=[],r=t.definition,o=0,i=r.length>o,a=!0;for(;i&&a;)a=xe(e=r[o]),n=n.concat(Ue(e)),o+=1,i=r.length>o;return F(n)}(t);if(function(t){return t instanceof Ne}(t))return function(t){return F(E(T(t.definition,(function(t){return Ue(t)}))))}(t);throw Error("non exhaustive match")}var De="_~IN~_",Fe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(t){function e(e){var n=t.call(this)||this;return n.topProd=e,n.follows={},n}return Fe(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,n){},e.prototype.walkProdRef=function(t,e,n){var r,o,i=(r=t.referencedRule,o=t.idx,r.name+o+De+this.topProd.name),a=e.concat(n),s=Ue(new Te({definition:a}));this.follows[i]=s},e}(Le);var Be={buildMismatchTokenMessage:function(t){var e=t.expected,n=t.actual;t.previous,t.ruleName;return"Expecting "+(ee(e)?"--\x3e "+te(e)+" <--":"token of type --\x3e "+e.name+" <--")+" but found --\x3e '"+n.image+"' <--"},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;t.ruleName;return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage:function(t){var e=t.expectedPathsPerAlt,n=t.actual,r=(t.previous,t.customUserDescription),o=(t.ruleName,"Expecting: "),i="\nbut found: '"+g(n).image+"'";if(r)return o+r+i;var a=T(U(e,(function(t,e){return t.concat(e)}),[]),(function(t){return"["+T(t,(function(t){return te(t)})).join(", ")+"]"}));return o+("one of these possible Token sequences:\n"+T(a,(function(t,e){return"  "+(e+1)+". "+t})).join("\n"))+i},buildEarlyExitMessage:function(t){var e=t.expectedIterationPaths,n=t.actual,r=t.customUserDescription,o=(t.ruleName,"Expecting: "),i="\nbut found: '"+g(n).image+"'";return r?o+r+i:o+("expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+T(e,(function(t){return"["+T(t,(function(t){return te(t)})).join(",")+"]"})).join(" ,")+">")+i}};Object.freeze(Be);var je={buildRuleNotFoundError:function(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"}},Ke={buildDuplicateFoundError:function(t,e){var n,r=t.name,o=g(e),i=o.idx,a=be(o),s=(n=o)instanceof Ie?n.terminalType.name:n instanceof me?n.nonTerminalName:"",c="->"+a+(i>0?i:"")+"<- "+(s?"with argument: ->"+s+"<-":"")+"\n                  appears more than once ("+e.length+" times) in the top level rule: ->"+r+"<-.                  \n                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return c=(c=c.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildNamespaceConflictError:function(t){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+t.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(t){var e=T(t.prefixPath,(function(t){return te(t)})).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return"Ambiguous alternatives: <"+t.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+n+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+e+"> may appears as a prefix path in all these alternatives.\nSee: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(t){var e=T(t.prefixPath,(function(t){return te(t)})).join(", "),n=0===t.alternation.idx?"":t.alternation.idx,r="Ambiguous Alternatives Detected: <"+t.ambiguityIndices.join(" ,")+"> in <OR"+n+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+e+"> may appears as a prefix path in all these alternatives.\n";return r+="See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(t){var e=be(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),"The repetition <"+e+"> within Rule <"+t.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(t){return"Invalid Grammar Token name: ->"+t.tokenType.name+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-"},buildEmptyAlternationError:function(t){return"Ambiguous empty alternative: <"+(t.emptyChoiceIdx+1)+"> in <OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(t){return"An Alternation cannot have more than 256 alternatives:\n<OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\n has "+(t.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(t){var e=t.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+e+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+(e+" --\x3e "+T(t.leftRecursionPath,(function(t){return t.name})).concat([e]).join(" --\x3e "))+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(t){return"Invalid grammar rule name: ->"+t.topLevelRule.name+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-"},buildDuplicateRuleNameError:function(t){return"Duplicate definition, rule: ->"+(t.topLevelRule instanceof ye?t.topLevelRule.name:t.topLevelRule)+"<- is already defined in the grammar: ->"+t.grammarName+"<-"}},He=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var We=function(t){function e(e,n){var r=t.call(this)||this;return r.nameToTopRule=e,r.errMsgProvider=n,r.errors=[],r}return He(e,t),e.prototype.resolveRefs=function(){var t=this;R(y(this.nameToTopRule),(function(e){t.currTopLevel=e,e.accept(t)}))},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:gr.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(Ce),Ve=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=r.path.lastTok.name,r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return Ve(e,t),e.prototype.walkTerminal=function(t,e,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){var r=e.concat(n),o=new Te({definition:r});this.possibleTokTypes=Ue(o),this.found=!0}},e}(function(t){function e(e,n){var r=t.call(this)||this;return r.topProd=e,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return Ve(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=b(this.path.ruleStack).reverse(),this.occurrenceStack=b(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,n){void 0===n&&(n=[]),this.found||t.prototype.walk.call(this,e,n)},e.prototype.walkProdRef=function(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){var r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}},e.prototype.updateExpectedNext=function(){v(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(Le)),ze=function(t){function e(e,n){var r=t.call(this)||this;return r.topRule=e,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return Ve(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(Le),Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ve(e,t),e.prototype.walkMany=function(e,n,r){if(e.idx===this.occurrence){var o=g(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof Ie&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkMany.call(this,e,n,r)},e}(ze),qe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ve(e,t),e.prototype.walkManySep=function(e,n,r){if(e.idx===this.occurrence){var o=g(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof Ie&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkManySep.call(this,e,n,r)},e}(ze),$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ve(e,t),e.prototype.walkAtLeastOne=function(e,n,r){if(e.idx===this.occurrence){var o=g(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof Ie&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkAtLeastOne.call(this,e,n,r)},e}(ze),Je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ve(e,t),e.prototype.walkAtLeastOneSep=function(e,n,r){if(e.idx===this.occurrence){var o=g(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof Ie&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkAtLeastOneSep.call(this,e,n,r)},e}(ze);function Ze(t,e,n){void 0===n&&(n=[]),n=b(n);var r=[],o=0;function i(i){var a=Ze(i.concat(_(t,o+1)),e,n);return r.concat(a)}for(;n.length<e&&o<t.length;){var a=t[o];if(a instanceof Te)return i(a.definition);if(a instanceof me)return i(a.definition);if(a instanceof Ee)r=i(a.definition);else{if(a instanceof ge)return i(s=a.definition.concat([new Re({definition:a.definition})]));if(a instanceof Ae)return i(s=[new Te({definition:a.definition}),new Re({definition:[new Ie({terminalType:a.separator})].concat(a.definition)})]);if(a instanceof Oe){var s=a.definition.concat([new Re({definition:[new Ie({terminalType:a.separator})].concat(a.definition)})]);r=i(s)}else if(a instanceof Re){s=a.definition.concat([new Re({definition:a.definition})]);r=i(s)}else{if(a instanceof Ne)return R(a.definition,(function(t){!1===v(t.definition)&&(r=i(t.definition))})),r;if(!(a instanceof Ie))throw Error("non exhaustive match");n.push(a.terminalType)}}o++}return r.push({partialPath:n,suffixDef:_(t,o)}),r}function Qe(t,e,n,r){var o="EXIT_NONE_TERMINAL",i=[o],a="EXIT_ALTERNATIVE",s=!1,c=e.length,u=c-r-1,l=[],p=[];for(p.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!v(p);){var f=p.pop();if(f!==a){var h=f.def,d=f.idx,m=f.ruleStack,y=f.occurrenceStack;if(!v(h)){var T=h[0];if(T===o){var E={idx:d,def:_(h),ruleStack:S(m),occurrenceStack:S(y)};p.push(E)}else if(T instanceof Ie)if(d<c-1){var g=d+1;if(n(e[g],T.terminalType)){E={idx:g,def:_(h),ruleStack:m,occurrenceStack:y};p.push(E)}}else{if(d!==c-1)throw Error("non exhaustive match");l.push({nextTokenType:T.terminalType,nextTokenOccurrence:T.idx,ruleStack:m,occurrenceStack:y}),s=!0}else if(T instanceof me){var R=b(m);R.push(T.nonTerminalName);var O=b(y);O.push(T.idx);E={idx:d,def:T.definition.concat(i,_(h)),ruleStack:R,occurrenceStack:O};p.push(E)}else if(T instanceof Ee){var N={idx:d,def:_(h),ruleStack:m,occurrenceStack:y};p.push(N),p.push(a);var I={idx:d,def:T.definition.concat(_(h)),ruleStack:m,occurrenceStack:y};p.push(I)}else if(T instanceof ge){var L=new Re({definition:T.definition,idx:T.idx});E={idx:d,def:T.definition.concat([L],_(h)),ruleStack:m,occurrenceStack:y};p.push(E)}else if(T instanceof Ae){var k=new Ie({terminalType:T.separator});L=new Re({definition:[k].concat(T.definition),idx:T.idx}),E={idx:d,def:T.definition.concat([L],_(h)),ruleStack:m,occurrenceStack:y};p.push(E)}else if(T instanceof Oe){N={idx:d,def:_(h),ruleStack:m,occurrenceStack:y};p.push(N),p.push(a);k=new Ie({terminalType:T.separator});var C=new Re({definition:[k].concat(T.definition),idx:T.idx});I={idx:d,def:T.definition.concat([C],_(h)),ruleStack:m,occurrenceStack:y};p.push(I)}else if(T instanceof Re){N={idx:d,def:_(h),ruleStack:m,occurrenceStack:y};p.push(N),p.push(a);C=new Re({definition:T.definition,idx:T.idx}),I={idx:d,def:T.definition.concat([C],_(h)),ruleStack:m,occurrenceStack:y};p.push(I)}else if(T instanceof Ne)for(var P=T.definition.length-1;P>=0;P--){var x={idx:d,def:T.definition[P].definition.concat(_(h)),ruleStack:m,occurrenceStack:y};p.push(x),p.push(a)}else if(T instanceof Te)p.push({idx:d,def:T.definition.concat(_(h)),ruleStack:m,occurrenceStack:y});else{if(!(T instanceof ye))throw Error("non exhaustive match");p.push(tn(T,d,m,y))}}}else s&&A(p).idx<=u&&p.pop()}return l}function tn(t,e,n,r){var o=b(n);o.push(t.name);var i=b(r);return i.push(1),{idx:e,def:t.definition,ruleStack:o,occurrenceStack:i}}var en,nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(en||(en={}));var rn=function(t){function e(e,n,r){var o=t.call(this)||this;return o.topProd=e,o.targetOccurrence=n,o.targetProdType=r,o}return nn(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,n,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)},e.prototype.walkOption=function(e,n,r){this.checkIsTarget(e,en.OPTION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOne=function(e,n,r){this.checkIsTarget(e,en.REPETITION_MANDATORY,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOneSep=function(e,n,r){this.checkIsTarget(e,en.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkMany=function(e,n,r){this.checkIsTarget(e,en.REPETITION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkManySep=function(e,n,r){this.checkIsTarget(e,en.REPETITION_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e}(Le),on=function(t){function e(e,n,r){var o=t.call(this)||this;return o.targetOccurrence=e,o.targetProdType=n,o.targetRef=r,o.result=[],o}return nn(e,t),e.prototype.checkIsTarget=function(t,e){t.idx!==this.targetOccurrence||this.targetProdType!==e||void 0!==this.targetRef&&t!==this.targetRef||(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,en.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,en.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,en.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,en.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,en.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,en.ALTERNATION)},e}(Ce);function an(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=[];return e}function sn(t){for(var e=[""],n=0;n<t.length;n++){for(var r=t[n],o=[],i=0;i<e.length;i++){var a=e[i];o.push(a+"_"+r.tokenTypeIdx);for(var s=0;s<r.categoryMatches.length;s++){var c="_"+r.categoryMatches[s];o.push(a+c)}}e=o}return e}function cn(t,e,n){for(var r=0;r<t.length;r++)if(r!==n)for(var o=t[r],i=0;i<e.length;i++){if(!0===o[e[i]])return!1}return!0}function un(t,e){for(var n=T(t,(function(t){return Ze([t],1)})),r=an(n.length),o=T(n,(function(t){var e={};return R(t,(function(t){R(sn(t.partialPath),(function(t){e[t]=!0}))})),e})),i=n,a=1;a<=e;a++){var s=i;i=an(s.length);for(var c=function(t){for(var n=s[t],c=0;c<n.length;c++){var u=n[c].partialPath,l=n[c].suffixDef,p=sn(u);if(cn(o,p,t)||v(l)||u.length===e){var f=r[t];if(!1===fn(f,u)){f.push(u);for(var h=0;h<p.length;h++){var d=p[h];o[t][d]=!0}}}else{var m=Ze(l,a+1,u);i[t]=i[t].concat(m),R(m,(function(e){R(sn(e.partialPath),(function(e){o[t][e]=!0}))}))}}},u=0;u<s.length;u++)c(u)}return r}function ln(t,e,n,r){var o=new on(t,en.ALTERNATION,r);return e.accept(o),un(o.result,n)}function pn(t,e,n,r){var o=new on(t,n);e.accept(o);var i=o.result,a=new rn(e,t,n).startWalking();return un([new Te({definition:i}),new Te({definition:a})],r)}function fn(t,e){t:for(var n=0;n<t.length;n++){var r=t[n];if(r.length===e.length){for(var o=0;o<r.length;o++){var i=e[o],a=r[o];if(!1===(i===a||void 0!==a.categoryMatchesMap[i.tokenTypeIdx]))continue t}return!0}}return!1}function hn(t){return K(t,(function(t){return K(t,(function(t){return K(t,(function(t){return v(t.categoryMatches)}))}))}))}var dn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function vn(t,e,n,r,o){var i=T(t,(function(t){return function(t,e){var n=new Tn;return t.accept(n),T(y(C(function(t,e){var n={};return R(t,(function(t){var r=e(t),o=n[r];o?o.push(t):n[r]=[t]})),n}(n.allProductions,mn),(function(t){return t.length>1}))),(function(n){var r=g(n),o=e.buildDuplicateFoundError(t,n),i=be(r),a={message:o,type:gr.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:i,occurrence:r.idx},s=yn(r);return s&&(a.parameter=s),a}))}(t,r)})),a=T(t,(function(t){return gn(t,t,r)})),s=[],c=[],u=[];K(a,v)&&(s=T(t,(function(t){return function(t,e){var n=new Rn;return t.accept(n),U(n.alternations,(function(n,r){var o=T(S(r.definition),(function(n,o){return v(Qe([n],[],null,1))?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:r,emptyChoiceIdx:o}),type:gr.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:r.idx,alternative:o+1}:null}));return n.concat(D(o))}),[])}(t,r)})),c=T(t,(function(t){return function(t,e,n){var r=new Rn;t.accept(r);var o=r.alternations;return U(o=k(o,(function(t){return!0===t.ignoreAmbiguities})),(function(r,o){var i=o.idx,a=o.maxLookahead||e,s=ln(i,t,a,o),c=function(t,e,n,r){var o=[];return T(U(t,(function(n,r,i){return!0===e.definition[i].ignoreAmbiguities||R(r,(function(r){var a=[i];R(t,(function(t,n){i!==n&&fn(t,r)&&!0!==e.definition[n].ignoreAmbiguities&&a.push(n)})),a.length>1&&!fn(o,r)&&(o.push(r),n.push({alts:a,path:r}))})),n}),[]),(function(t){var o=T(t.alts,(function(t){return t+1}));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:o,prefixPath:t.path}),type:gr.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:[t.alts]}}))}(s,o,t,n),u=function(t,e,n,r){var o=[],i=U(t,(function(t,e,n){var r=T(e,(function(t){return{idx:n,path:t}}));return t.concat(r)}),[]);return R(i,(function(t){if(!0!==e.definition[t.idx].ignoreAmbiguities){var a=t.idx,s=t.path,c=T(function(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r];e.call(null,o)&&n.push(o)}return n}(i,(function(t){return!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<a&&(n=t.path,r=s,n.length<r.length&&K(n,(function(t,e){var n=r[e];return t===n||n.categoryMatchesMap[t.tokenTypeIdx]})));var n,r})),(function(t){var o=[t.idx+1,a+1],i=0===e.idx?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:o,prefixPath:t.path}),type:gr.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:i,alternatives:o}}));o=o.concat(c)}})),o}(s,o,t,n);return r.concat(c,u)}),[])}(t,e,r)})),u=function(t,e,n){var r=[];return R(t,(function(t){var o=new On;t.accept(o),R(o.allProductions,(function(o){var i=function(t){if(t instanceof Ee)return en.OPTION;if(t instanceof Re)return en.REPETITION;if(t instanceof ge)return en.REPETITION_MANDATORY;if(t instanceof Ae)return en.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Oe)return en.REPETITION_WITH_SEPARATOR;if(t instanceof Ne)return en.ALTERNATION;throw Error("non exhaustive match")}(o),a=o.maxLookahead||e;if(v(E(pn(o.idx,t,i,a)[0]))){var s=n.buildEmptyRepetitionError({topLevelRule:t,repetition:o});r.push({message:s,type:gr.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),r}(t,e,r));var l=function(t,e,n){var r=[],o=T(e,(function(t){return t.name}));return R(t,(function(t){var e=t.name;if(x(o,e)){var i=n.buildNamespaceConflictError(t);r.push({message:i,type:gr.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),r}(t,n,r),p=T(n,(function(t){return function(t,e){var n=[];t.name.match(En)||n.push({message:e.buildTokenNameError({tokenType:t,expectedPattern:En}),type:gr.INVALID_TOKEN_NAME});return n}(t,r)})),f=T(t,(function(t){return function(t,e){var n=new Rn;return t.accept(n),U(n.alternations,(function(n,r){return r.definition.length>255&&n.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:r}),type:gr.TOO_MANY_ALTS,ruleName:t.name,occurrence:r.idx}),n}),[])}(t,r)})),h=T(t,(function(t){return function(t,e){var n=[],r=t.name;r.match(En)||n.push({message:e.buildInvalidRuleNameError({topLevelRule:t,expectedPattern:En}),type:gr.INVALID_RULE_NAME,ruleName:r});return n}(t,r)})),d=T(t,(function(e){return function(t,e,n,r){var o=[];if(U(e,(function(e,n){return n.name===t.name?e+1:e}),0)>1){var i=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});o.push({message:i,type:gr.DUPLICATE_RULE_NAME,ruleName:t.name})}return o}(e,t,o,r)}));return E(i.concat(p,u,a,s,c,l,f,h,d))}function mn(t){return be(t)+"_#_"+t.idx+"_#_"+yn(t)}function yn(t){return t instanceof Ie?t.terminalType.name:t instanceof me?t.nonTerminalName:""}var Tn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return dn(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(Ce),En=/^[a-zA-Z_]\w*$/;function gn(t,e,n,r){void 0===r&&(r=[]);var o=[],i=An(e.definition);if(v(i))return[];var a=t.name;x(i,t)&&o.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:gr.LEFT_RECURSION,ruleName:a});var s=T(H(i,r.concat([t])),(function(e){var o=b(r);return o.push(e),gn(t,e,n,o)}));return o.concat(E(s))}function An(t){var e=[];if(v(t))return e;var n=g(t);if(n instanceof me)e.push(n.referencedRule);else if(n instanceof Te||n instanceof Ee||n instanceof ge||n instanceof Ae||n instanceof Oe||n instanceof Re)e=e.concat(An(n.definition));else if(n instanceof Ne)e=E(T(n.definition,(function(t){return An(t.definition)})));else if(!(n instanceof Ie))throw Error("non exhaustive match");var r=xe(n),o=t.length>1;if(r&&o){var i=_(t);return e.concat(An(i))}return e}var Rn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alternations=[],e}return dn(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(Ce);var On=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return dn(e,t),e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e}(Ce);function Nn(t){t=z(t,{errMsgProvider:je});var e,n,r,o={};return R(t.rules,(function(t){o[t.name]=t})),e=o,n=t.errMsgProvider,(r=new We(e,n)).resolveRefs(),r.errors}function In(t){return vn((t=z(t,{errMsgProvider:Ke})).rules,t.maxLookahead,t.tokenTypes,t.errMsgProvider,t.grammarName)}var _n="MismatchedTokenException",Sn="NoViableAltException",Ln="EarlyExitException",kn="NotAllInputParsedException",Cn=[_n,Sn,Ln,kn];function Pn(t){return x(Cn,t.name)}function xn(t,e,n){this.name=_n,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function bn(t,e,n){this.name=Sn,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function Mn(t,e){this.name=kn,this.message=t,this.token=e,this.resyncedTokens=[]}function wn(t,e,n){this.name=Ln,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}Object.freeze(Cn),xn.prototype=Error.prototype,bn.prototype=Error.prototype,Mn.prototype=Error.prototype,wn.prototype=Error.prototype;var Un={},Dn="InRuleRecoveryException";function Fn(t){this.name=Dn,this.message=t}Fn.prototype=Error.prototype;var Gn=function(){function t(){}return t.prototype.initRecoverable=function(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=P(t,"recoveryEnabled")?t.recoveryEnabled:Ar.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Bn)},t.prototype.getTokenToInsert=function(t){var e=he(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e},t.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},t.prototype.tryInRepetitionRecovery=function(t,e,n,r){for(var o=this,i=this.findReSyncTokenType(),a=this.exportLexerState(),s=[],c=!1,u=this.LA(1),l=this.LA(1),p=function(){var t=o.LA(0),e=new xn(o.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:u,previous:t,ruleName:o.getCurrRuleFullName()}),u,o.LA(0));e.resyncedTokens=S(s),o.SAVE_ERROR(e)};!c;){if(this.tokenMatcher(l,r))return void p();if(n.call(this))return p(),void t.apply(this,e);this.tokenMatcher(l,i)?c=!0:(l=this.SKIP_TOKEN(),this.addToResyncTokens(l,s))}this.importLexerState(a)},t.prototype.shouldInRepetitionRecoveryBeTried=function(t,e,n){return!1!==n&&(void 0!==t&&void 0!==e&&(!this.tokenMatcher(this.LA(1),t)&&(!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e)))))},t.prototype.getFollowsForInRuleRecovery=function(t,e){var n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)},t.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new Fn("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},t.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(v(e))return!1;var r=this.LA(1);return void 0!==w(e,(function(t){return n.tokenMatcher(r,t)}))},t.prototype.canRecoverWithSingleTokenDeletion=function(t){return this.tokenMatcher(this.LA(2),t)},t.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey();return x(this.getFollowSetFromFollowKey(e),t)},t.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),n=2;;){var r=e.tokenType;if(x(t,r))return r;e=this.LA(n),n++}},t.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return Un;var t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(n)}},t.prototype.buildFullFollowKeyStack=function(){var t=this,e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return T(e,(function(r,o){return 0===o?Un:{ruleName:t.shortRuleNameToFullName(r),idxInCallingRule:n[o],inRule:t.shortRuleNameToFullName(e[o-1])}}))},t.prototype.flattenFollowSet=function(){var t=this;return E(T(this.buildFullFollowKeyStack(),(function(e){return t.getFollowSetFromFollowKey(e)})))},t.prototype.getFollowSetFromFollowKey=function(t){if(t===Un)return[fe];var e=t.ruleName+t.idxInCallingRule+De+t.inRule;return this.resyncFollows[e]},t.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,fe)||e.push(t),e},t.prototype.reSyncTo=function(t){for(var e=[],n=this.LA(1);!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return S(e)},t.prototype.attemptInRepetitionRecovery=function(t,e,n,r,o,i,a){},t.prototype.getCurrentGrammarPath=function(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:b(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}},t.prototype.getHumanReadableRuleStack=function(){var t=this;return T(this.RULE_STACK,(function(e){return t.shortRuleNameToFullName(e)}))},t}();function Bn(t,e,n,r,o,i,a){var s=this.getKeyForAutomaticLookahead(r,o),c=this.firstAfterRepMap[s];if(void 0===c){var u=this.getCurrRuleFullName();c=new i(this.getGAstProductions()[u],o).startWalking(),this.firstAfterRepMap[s]=c}var l=c.token,p=c.occurrence,f=c.isEndOfRule;1===this.RULE_STACK.length&&f&&void 0===l&&(l=fe,p=1),this.shouldInRepetitionRecoveryBeTried(l,p,a)&&this.tryInRepetitionRecovery(t,e,n,l)}var jn=1024,Kn=1280,Hn=1536;function Wn(t,e,n){return n|e|t}var Vn=function(){function t(){}return t.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=P(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:Ar.dynamicTokensEnabled,this.maxLookahead=P(t,"maxLookahead")?t.maxLookahead:Ar.maxLookahead,this.lookAheadFuncsCache=Q()?new Map:[],Q()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},t.prototype.preComputeLookaheadFunctions=function(t){var e=this;R(t,(function(t){e.TRACE_INIT(t.name+" Rule Lookahead",(function(){var n=function(t){we.reset(),t.accept(we);var e=we.dslMethods;return we.reset(),e}(t),r=n.alternation,o=n.repetition,i=n.option,a=n.repetitionMandatory,s=n.repetitionMandatoryWithSeparator,c=n.repetitionWithSeparator;R(r,(function(n){var r=0===n.idx?"":n.idx;e.TRACE_INIT(""+be(n)+r,(function(){var r,o,i,a,s,c,u,l=(r=n.idx,o=t,i=n.maxLookahead||e.maxLookahead,a=n.hasPredicates,s=e.dynamicTokensEnabled,c=e.lookAheadBuilderForAlternatives,u=ln(r,o,i),c(u,a,hn(u)?Kt:jt,s)),p=Wn(e.fullRuleNameToShort[t.name],256,n.idx);e.setLaFuncCache(p,l)}))})),R(o,(function(n){e.computeLookaheadFunc(t,n.idx,768,en.REPETITION,n.maxLookahead,be(n))})),R(i,(function(n){e.computeLookaheadFunc(t,n.idx,512,en.OPTION,n.maxLookahead,be(n))})),R(a,(function(n){e.computeLookaheadFunc(t,n.idx,jn,en.REPETITION_MANDATORY,n.maxLookahead,be(n))})),R(s,(function(n){e.computeLookaheadFunc(t,n.idx,Hn,en.REPETITION_MANDATORY_WITH_SEPARATOR,n.maxLookahead,be(n))})),R(c,(function(n){e.computeLookaheadFunc(t,n.idx,Kn,en.REPETITION_WITH_SEPARATOR,n.maxLookahead,be(n))}))}))}))},t.prototype.computeLookaheadFunc=function(t,e,n,r,o,i){var a=this;this.TRACE_INIT(""+i+(0===e?"":e),(function(){var i=function(t,e,n,r,o,i){var a=pn(t,e,o,n),s=hn(a)?Kt:jt;return i(a[0],s,r)}(e,t,o||a.maxLookahead,a.dynamicTokensEnabled,r,a.lookAheadBuilderForOptional),s=Wn(a.fullRuleNameToShort[t.name],n,e);a.setLaFuncCache(s,i)}))},t.prototype.lookAheadBuilderForOptional=function(t,e,n){return function(t,e,n){var r=K(t,(function(t){return 1===t.length})),o=t.length;if(r&&!n){var i=E(t);if(1===i.length&&v(i[0].categoryMatches)){var a=i[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}var s=U(i,(function(t,e,n){return t[e.tokenTypeIdx]=!0,R(e.categoryMatches,(function(e){t[e]=!0})),t}),[]);return function(){var t=this.LA(1);return!0===s[t.tokenTypeIdx]}}return function(){t:for(var n=0;n<o;n++){for(var r=t[n],i=r.length,a=0;a<i;a++){var s=this.LA(a+1);if(!1===e(s,r[a]))continue t}return!0}return!1}}(t,e,n)},t.prototype.lookAheadBuilderForAlternatives=function(t,e,n,r){return function(t,e,n,r){var o=t.length,i=K(t,(function(t){return K(t,(function(t){return 1===t.length}))}));if(e)return function(e){for(var r=T(e,(function(t){return t.GATE})),i=0;i<o;i++){var a=t[i],s=a.length,c=r[i];if(void 0===c||!1!==c.call(this))t:for(var u=0;u<s;u++){for(var l=a[u],p=l.length,f=0;f<p;f++){var h=this.LA(f+1);if(!1===n(h,l[f]))continue t}return i}}};if(i&&!r){var a=U(T(t,(function(t){return E(t)})),(function(t,e,n){return R(e,(function(e){P(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),R(e.categoryMatches,(function(e){P(t,e)||(t[e]=n)}))})),t}),[]);return function(){var t=this.LA(1);return a[t.tokenTypeIdx]}}return function(){for(var e=0;e<o;e++){var r=t[e],i=r.length;t:for(var a=0;a<i;a++){for(var s=r[a],c=s.length,u=0;u<c;u++){var l=this.LA(u+1);if(!1===n(l,s[u]))continue t}return e}}}}(t,e,n,r)},t.prototype.getKeyForAutomaticLookahead=function(t,e){return Wn(this.getLastExplicitRuleShortName(),t,e)},t.prototype.getLaFuncFromCache=function(t){},t.prototype.getLaFuncFromMap=function(t){return this.lookAheadFuncsCache.get(t)},t.prototype.getLaFuncFromObj=function(t){return this.lookAheadFuncsCache[t]},t.prototype.setLaFuncCache=function(t,e){},t.prototype.setLaFuncCacheUsingMap=function(t,e){this.lookAheadFuncsCache.set(t,e)},t.prototype.setLaFuncUsingObj=function(t,e){this.lookAheadFuncsCache[t]=e},t}();function Yn(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset==!0&&(t.endOffset=e.endOffset)}function zn(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset==!0&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}var Xn,qn="name";function $n(t){var e=t.name;return e||"anonymous"}function Jn(t,e){var n=Object.getOwnPropertyDescriptor(t,qn);return!(!N(n)&&!n.configurable)&&(Object.defineProperty(t,qn,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0)}function Zn(t,e){for(var n=m(t),r=n.length,o=0;o<r;o++)for(var i=t[n[o]],a=i.length,s=0;s<a;s++){var c=i[s];void 0===c.tokenTypeIdx&&this[c.name](c.children,e)}}function Qn(t,e){var n=function(){};return Jn(n,t+"BaseSemantics"),(n.prototype={visit:function(t,e){if(G(t)&&(t=t[0]),!N(t))return this[t.name](t.children,e)},validateVisitor:function(){var t=function(t,e){var n=function(t,e){return D(T(e,(function(e){if(!I(t[e]))return{msg:"Missing visitor method: <"+e+"> on "+$n(t.constructor)+" CST Visitor.",type:Xn.MISSING_METHOD,methodName:e}})))}(t,e),r=function(t,e){var n=[];for(var r in t)En.test(r)&&I(t[r])&&!x(tr,r)&&!x(e,r)&&n.push({msg:"Redundant visitor method: <"+r+"> on "+$n(t.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\nFor utility methods on visitor classes use methods names that do not match /"+En.source+"/.",type:Xn.REDUNDANT_METHOD,methodName:r});return n}(t,e);return n.concat(r)}(this,e);if(!v(t)){var n=T(t,(function(t){return t.msg}));throw Error("Errors Detected in CST Visitor <"+$n(this.constructor)+">:\n\t"+n.join("\n\n").replace(/\n/g,"\n\t"))}}}).constructor=n,n._RULE_NAMES=e,n}!function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"}(Xn||(Xn={}));var tr=["constructor","visit","validateVisitor"];var er=function(){function t(){}return t.prototype.initTreeBuilder=function(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=P(t,"nodeLocationTracking")?t.nodeLocationTracking:Ar.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=zn,this.setNodeLocationFromNode=zn,this.cstPostRule=q,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=q,this.setNodeLocationFromNode=q,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Yn,this.setNodeLocationFromNode=Yn,this.cstPostRule=q,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=q,this.setNodeLocationFromNode=q,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+t.nodeLocationTracking+'"');this.setNodeLocationFromToken=q,this.setNodeLocationFromNode=q,this.cstPostRule=q,this.setInitialNodeLocation=q}else this.cstInvocationStateUpdate=q,this.cstFinallyStateUpdate=q,this.cstPostTerminal=q,this.cstPostNonTerminal=q,this.cstPostRule=q},t.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(t){t.location={startOffset:NaN,endOffset:NaN}},t.prototype.setInitialNodeLocationOnlyOffsetRegular=function(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},t.prototype.setInitialNodeLocationFullRecovery=function(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.setInitialNodeLocationFullRegular=function(t){var e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.cstInvocationStateUpdate=function(t,e){var n={name:t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},t.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},t.prototype.cstPostRuleFull=function(t){var e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==!0?(n.endOffset=e.endOffset,n.endLine=e.endLine,n.endColumn=e.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)},t.prototype.cstPostRuleOnlyOffset=function(t){var e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==!0?n.endOffset=e.endOffset:n.startOffset=NaN},t.prototype.cstPostTerminal=function(t,e){var n,r,o,i=this.CST_STACK[this.CST_STACK.length-1];r=e,o=t,void 0===(n=i).children[o]?n.children[o]=[r]:n.children[o].push(r),this.setNodeLocationFromToken(i.location,e)},t.prototype.cstPostNonTerminal=function(t,e){var n=this.CST_STACK[this.CST_STACK.length-1];!function(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)}(n,e,t),this.setNodeLocationFromNode(n.location,t.location)},t.prototype.getBaseCstVisitorConstructor=function(){if(N(this.baseCstVisitorConstructor)){var t=Qn(this.className,m(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(N(this.baseCstVisitorWithDefaultsConstructor)){var t=function(t,e,n){var r=function(){};Jn(r,t+"BaseSemanticsWithDefaults");var o=Object.create(n.prototype);return R(e,(function(t){o[t]=Zn})),(r.prototype=o).constructor=r,r}(this.className,m(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},t.prototype.getLastExplicitRuleShortName=function(){var t=this.RULE_STACK;return t[t.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var t=this.RULE_STACK;return t[t.length-2]},t.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},t}(),nr=function(){function t(){}return t.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(t.prototype,"input",{get:function(){return this.tokVector},set:function(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!1,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Er},t.prototype.LA=function(t){var e=this.currIdx+t;return e<0||this.tokVectorLength<=e?Er:this.tokVector[e]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(t){this.currIdx=t},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.getLexerPosition=function(){return this.exportLexerState()},t}(),rr=function(){function t(){}return t.prototype.ACTION=function(t){return t.call(this)},t.prototype.consume=function(t,e,n){return this.consumeInternal(e,t,n)},t.prototype.subrule=function(t,e,n){return this.subruleInternal(e,t,n)},t.prototype.option=function(t,e){return this.optionInternal(e,t)},t.prototype.or=function(t,e){return this.orInternal(e,t)},t.prototype.many=function(t,e){return this.manyInternal(t,e)},t.prototype.atLeastOne=function(t,e){return this.atLeastOneInternal(t,e)},t.prototype.CONSUME=function(t,e){return this.consumeInternal(t,0,e)},t.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},t.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},t.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},t.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},t.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},t.prototype.CONSUME6=function(t,e){return this.consumeInternal(t,6,e)},t.prototype.CONSUME7=function(t,e){return this.consumeInternal(t,7,e)},t.prototype.CONSUME8=function(t,e){return this.consumeInternal(t,8,e)},t.prototype.CONSUME9=function(t,e){return this.consumeInternal(t,9,e)},t.prototype.SUBRULE=function(t,e){return this.subruleInternal(t,0,e)},t.prototype.SUBRULE1=function(t,e){return this.subruleInternal(t,1,e)},t.prototype.SUBRULE2=function(t,e){return this.subruleInternal(t,2,e)},t.prototype.SUBRULE3=function(t,e){return this.subruleInternal(t,3,e)},t.prototype.SUBRULE4=function(t,e){return this.subruleInternal(t,4,e)},t.prototype.SUBRULE5=function(t,e){return this.subruleInternal(t,5,e)},t.prototype.SUBRULE6=function(t,e){return this.subruleInternal(t,6,e)},t.prototype.SUBRULE7=function(t,e){return this.subruleInternal(t,7,e)},t.prototype.SUBRULE8=function(t,e){return this.subruleInternal(t,8,e)},t.prototype.SUBRULE9=function(t,e){return this.subruleInternal(t,9,e)},t.prototype.OPTION=function(t){return this.optionInternal(t,0)},t.prototype.OPTION1=function(t){return this.optionInternal(t,1)},t.prototype.OPTION2=function(t){return this.optionInternal(t,2)},t.prototype.OPTION3=function(t){return this.optionInternal(t,3)},t.prototype.OPTION4=function(t){return this.optionInternal(t,4)},t.prototype.OPTION5=function(t){return this.optionInternal(t,5)},t.prototype.OPTION6=function(t){return this.optionInternal(t,6)},t.prototype.OPTION7=function(t){return this.optionInternal(t,7)},t.prototype.OPTION8=function(t){return this.optionInternal(t,8)},t.prototype.OPTION9=function(t){return this.optionInternal(t,9)},t.prototype.OR=function(t){return this.orInternal(t,0)},t.prototype.OR1=function(t){return this.orInternal(t,1)},t.prototype.OR2=function(t){return this.orInternal(t,2)},t.prototype.OR3=function(t){return this.orInternal(t,3)},t.prototype.OR4=function(t){return this.orInternal(t,4)},t.prototype.OR5=function(t){return this.orInternal(t,5)},t.prototype.OR6=function(t){return this.orInternal(t,6)},t.prototype.OR7=function(t){return this.orInternal(t,7)},t.prototype.OR8=function(t){return this.orInternal(t,8)},t.prototype.OR9=function(t){return this.orInternal(t,9)},t.prototype.MANY=function(t){this.manyInternal(0,t)},t.prototype.MANY1=function(t){this.manyInternal(1,t)},t.prototype.MANY2=function(t){this.manyInternal(2,t)},t.prototype.MANY3=function(t){this.manyInternal(3,t)},t.prototype.MANY4=function(t){this.manyInternal(4,t)},t.prototype.MANY5=function(t){this.manyInternal(5,t)},t.prototype.MANY6=function(t){this.manyInternal(6,t)},t.prototype.MANY7=function(t){this.manyInternal(7,t)},t.prototype.MANY8=function(t){this.manyInternal(8,t)},t.prototype.MANY9=function(t){this.manyInternal(9,t)},t.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},t.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},t.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},t.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},t.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},t.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},t.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},t.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},t.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},t.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},t.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},t.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},t.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},t.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},t.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},t.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},t.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},t.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},t.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},t.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},t.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},t.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},t.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},t.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},t.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},t.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},t.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},t.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},t.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},t.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},t.prototype.RULE=function(t,e,n){if(void 0===n&&(n=Rr),x(this.definedRulesNames,t)){var r={message:Ke.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:gr.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(r)}this.definedRulesNames.push(t);var o=this.defineRule(t,e,n);return this[t]=o,o},t.prototype.OVERRIDE_RULE=function(t,e,n){void 0===n&&(n=Rr);var r,o,i,a,s,c=[];c=c.concat((r=t,o=this.definedRulesNames,i=this.className,s=[],x(o,r)||(a="Invalid rule override, rule: ->"+r+"<- cannot be overridden in the grammar: ->"+i+"<-as it is not defined in any of the super grammars ",s.push({message:a,type:gr.INVALID_RULE_OVERRIDE,ruleName:r})),s)),this.definitionErrors.push.apply(this.definitionErrors,c);var u=this.defineRule(t,e,n);return this[t]=u,u},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(Pn(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},t.prototype.getGAstProductions=function(){return this.gastProductionsCache},t.prototype.getSerializedGastProductions=function(){return _e(y(this.gastProductionsCache))},t}(),or=function(){function t(){}return t.prototype.initRecognizerEngine=function(t,e){if(this.className=$n(this.constructor),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Kt,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},P(e,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(G(t)){if(v(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(G(t))this.tokensMap=U(t,(function(t,e){return t[e.name]=e,t}),{});else if(P(t,"modes")&&K(E(y(t.modes)),qt)){var n=F(E(y(t.modes)));this.tokensMap=U(n,(function(t,e){return t[e.name]=e,t}),{})}else{if(!j(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=M(t)}this.tokensMap.EOF=fe;var r=K(y(t),(function(t){return v(t.categoryMatches)}));this.tokenMatcher=r?Kt:jt,Vt(y(this.tokensMap))},t.prototype.defineRule=function(t,e,n){if(this.selfAnalysisDone)throw Error("Grammar rule <"+t+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var r,o=P(n,"resyncEnabled")?n.resyncEnabled:Rr.resyncEnabled,i=P(n,"recoveryValueFunc")?n.recoveryValueFunc:Rr.recoveryValueFunc,a=this.ruleShortNameIdx<<12;function s(t){try{if(!0===this.outputCst){e.apply(this,t);var n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return e.apply(this,t)}catch(t){return this.invokeRuleCatch(t,o,i)}finally{this.ruleFinallyStateUpdate()}}this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=t,this.fullRuleNameToShort[t]=a;return(r=function(e,n){return void 0===e&&(e=0),this.ruleInvocationStateUpdate(a,t,e),s.call(this,n)}).ruleName=t,r.originalGrammarAction=e,r},t.prototype.invokeRuleCatch=function(t,e,n){var r=1===this.RULE_STACK.length,o=e&&!this.isBackTracking()&&this.recoveryEnabled;if(Pn(t)){var i=t;if(o){var a,s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s))return i.resyncedTokens=this.reSyncTo(s),this.outputCst?((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,a):n();throw this.outputCst&&((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,i.partialCstResult=a),i}if(r)return this.moveToTerminatedState(),n();throw i}throw t},t.prototype.optionInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(512,e);return this.optionInternalLogic(t,e,n)},t.prototype.optionInternalLogic=function(t,e,n){var r,o,i=this,a=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(o=t.GATE)){var s=a;a=function(){return o.call(i)&&s.call(i)}}}else r=t;if(!0===a.call(this))return r.call(this)},t.prototype.atLeastOneInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(jn,t);return this.atLeastOneInternalLogic(t,e,n)},t.prototype.atLeastOneInternalLogic=function(t,e,n){var r,o,i=this,a=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(o=e.GATE)){var s=a;a=function(){return o.call(i)&&s.call(i)}}}else r=e;if(!0!==a.call(this))throw this.raiseEarlyExitException(t,en.REPETITION_MANDATORY,e.ERR_MSG);for(var c=this.doSingleRepetition(r);!0===a.call(this)&&!0===c;)c=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],a,jn,t,$e)},t.prototype.atLeastOneSepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Hn,t);this.atLeastOneSepFirstInternalLogic(t,e,n)},t.prototype.atLeastOneSepFirstInternalLogic=function(t,e,n){var r=this,o=e.DEF,i=e.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(t,en.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);o.call(this);for(var a=function(){return r.tokenMatcher(r.LA(1),i)};!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,a,o,Je],a,Hn,t,Je)},t.prototype.manyInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,e,n)},t.prototype.manyInternalLogic=function(t,e,n){var r,o,i=this,a=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(o=e.GATE)){var s=a;a=function(){return o.call(i)&&s.call(i)}}}else r=e;for(var c=!0;!0===a.call(this)&&!0===c;)c=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],a,768,t,Xe,c)},t.prototype.manySepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Kn,t);this.manySepFirstInternalLogic(t,e,n)},t.prototype.manySepFirstInternalLogic=function(t,e,n){var r=this,o=e.DEF,i=e.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){o.call(this);for(var a=function(){return r.tokenMatcher(r.LA(1),i)};!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,a,o,qe],a,Kn,t,qe)}},t.prototype.repetitionSepSecondInternal=function(t,e,n,r,o){for(;n();)this.CONSUME(e),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,o],n,Hn,t,o)},t.prototype.doSingleRepetition=function(t){var e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e},t.prototype.orInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(256,e),r=G(t)?t:t.DEF,o=this.getLaFuncFromCache(n).call(this,r);if(void 0!==o)return r[o].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Mn(e,t))}},t.prototype.subruleInternal=function(t,e,n){var r;try{var o=void 0!==n?n.ARGS:void 0;return r=t.call(this,e,o),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),r}catch(e){this.subruleInternalError(e,n,t.ruleName)}},t.prototype.subruleInternalError=function(t,e,n){throw Pn(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:n),delete t.partialCstResult),t},t.prototype.consumeInternal=function(t,e,n){var r;try{var o=this.LA(1);!0===this.tokenMatcher(o,t)?(this.consumeToken(),r=o):this.consumeInternalError(t,o,n)}catch(n){r=this.consumeInternalRecovery(t,e,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.name,r),r},t.prototype.consumeInternalError=function(t,e,n){var r,o=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new xn(r,e,o))},t.prototype.consumeInternalRecovery=function(t,e,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,r)}catch(t){throw t.name===Dn?n:t}},t.prototype.saveRecogState=function(){var t=this.errors,e=b(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},t.prototype.ruleInvocationStateUpdate=function(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},t.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},t.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull[t]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),fe)},t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t}(),ir=function(){function t(){}return t.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=P(t,"errorMessageProvider")?t.errorMessageProvider:Ar.errorMessageProvider},t.prototype.SAVE_ERROR=function(t){if(Pn(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:b(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(t.prototype,"errors",{get:function(){return b(this._errors)},set:function(t){this._errors=t},enumerable:!1,configurable:!0}),t.prototype.raiseEarlyExitException=function(t,e,n){for(var r=this.getCurrRuleFullName(),o=pn(t,this.getGAstProductions()[r],e,this.maxLookahead)[0],i=[],a=1;a<=this.maxLookahead;a++)i.push(this.LA(a));var s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:i,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new wn(s,this.LA(1),this.LA(0)))},t.prototype.raiseNoAltException=function(t,e){for(var n=this.getCurrRuleFullName(),r=ln(t,this.getGAstProductions()[n],this.maxLookahead),o=[],i=1;i<=this.maxLookahead;i++)o.push(this.LA(i));var a=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:o,previous:a,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new bn(s,this.LA(1),a))},t}(),ar=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(t,e){var n=this.gastProductionsCache[t];if(N(n))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return Qe([n],e,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(t){var e=g(t.ruleStack),n=this.getGAstProductions()[e];return new Ye(n,t).startWalking()},t}(),sr={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(sr);var cr=Math.pow(2,8)-1,ur=pe({name:"RECORDING_PHASE_TOKEN",pattern:Qt.NA});Vt([ur]);var lr=he(ur,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(lr);var pr={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details",children:{}},fr=function(){function t(){}return t.prototype.initGastRecorder=function(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1},t.prototype.enableRecording=function(){var t=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var e=function(e){var n=e>0?e:"";t["CONSUME"+n]=function(t,n){return this.consumeInternalRecord(t,e,n)},t["SUBRULE"+n]=function(t,n){return this.subruleInternalRecord(t,e,n)},t["OPTION"+n]=function(t){return this.optionInternalRecord(t,e)},t["OR"+n]=function(t){return this.orInternalRecord(t,e)},t["MANY"+n]=function(t){this.manyInternalRecord(e,t)},t["MANY_SEP"+n]=function(t){this.manySepFirstInternalRecord(e,t)},t["AT_LEAST_ONE"+n]=function(t){this.atLeastOneInternalRecord(e,t)},t["AT_LEAST_ONE_SEP"+n]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}},n=0;n<10;n++)e(n);t.consume=function(t,e,n){return this.consumeInternalRecord(e,t,n)},t.subrule=function(t,e,n){return this.subruleInternalRecord(e,t,n)},t.option=function(t,e){return this.optionInternalRecord(e,t)},t.or=function(t,e){return this.orInternalRecord(e,t)},t.many=function(t,e){this.manyInternalRecord(t,e)},t.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},t.ACTION=t.ACTION_RECORD,t.BACKTRACK=t.BACKTRACK_RECORD,t.LA=t.LA_RECORD}))},t.prototype.disableRecording=function(){var t=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var e=0;e<10;e++){var n=e>0?e:"";delete t["CONSUME"+n],delete t["SUBRULE"+n],delete t["OPTION"+n],delete t["OR"+n],delete t["MANY"+n],delete t["MANY_SEP"+n],delete t["AT_LEAST_ONE"+n],delete t["AT_LEAST_ONE_SEP"+n]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))},t.prototype.ACTION_RECORD=function(t){},t.prototype.BACKTRACK_RECORD=function(t,e){return function(){return!0}},t.prototype.LA_RECORD=function(t){return Er},t.prototype.topLevelRuleRecord=function(t,e){try{var n=new ye({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),e.call(this),this.recordingProdStack.pop(),n}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording'}catch(e){throw t}throw t}},t.prototype.optionInternalRecord=function(t,e){return hr.call(this,Ee,t,e)},t.prototype.atLeastOneInternalRecord=function(t,e){hr.call(this,ge,e,t)},t.prototype.atLeastOneSepFirstInternalRecord=function(t,e){hr.call(this,Ae,e,t,true)},t.prototype.manyInternalRecord=function(t,e){hr.call(this,Re,e,t)},t.prototype.manySepFirstInternalRecord=function(t,e){hr.call(this,Oe,e,t,true)},t.prototype.orInternalRecord=function(t,e){return dr.call(this,t,e)},t.prototype.subruleInternalRecord=function(t,e,n){if(mr(e),!t||!1===P(t,"ruleName")){var r=new Error("<SUBRULE"+vr(e)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var o=et(this.recordingProdStack),i=t.ruleName,a=new me({idx:e,nonTerminalName:i,referencedRule:void 0});return o.definition.push(a),this.outputCst?pr:sr},t.prototype.consumeInternalRecord=function(t,e,n){if(mr(e),!zt(t)){var r=new Error("<CONSUME"+vr(e)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var o=et(this.recordingProdStack),i=new Ie({idx:e,terminalType:t});return o.definition.push(i),lr},t}();function hr(t,e,n,r){void 0===r&&(r=!1),mr(n);var o=et(this.recordingProdStack),i=I(e)?e:e.DEF,a=new t({definition:[],idx:n});return r&&(a.separator=e.SEP),P(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),i.call(this),o.definition.push(a),this.recordingProdStack.pop(),sr}function dr(t,e){var n=this;mr(e);var r=et(this.recordingProdStack),o=!1===G(t),i=!1===o?t:t.DEF,a=new Ne({definition:[],idx:e,ignoreAmbiguities:o&&!0===t.IGNORE_AMBIGUITIES});P(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD);var s=W(i,(function(t){return I(t.GATE)}));return a.hasPredicates=s,r.definition.push(a),R(i,(function(t){var e=new Te({definition:[]});a.definition.push(e),P(t,"IGNORE_AMBIGUITIES")?e.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:P(t,"GATE")&&(e.ignoreAmbiguities=!0),n.recordingProdStack.push(e),t.ALT.call(n),n.recordingProdStack.pop()})),sr}function vr(t){return 0===t?"":""+t}function mr(t){if(t<0||t>cr){var e=new Error("Invalid DSL Method idx value: <"+t+">\n\tIdx value must be a none negative value smaller than "+(cr+1));throw e.KNOWN_RECORDER_ERROR=!0,e}}var yr=function(){function t(){}return t.prototype.initPerformanceTracer=function(t){if(P(t,"traceInitPerf")){var e=t.traceInitPerf,n="number"==typeof e;this.traceInitMaxIdent=n?e:1/0,this.traceInitPerf=n?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=Ar.traceInitPerf;this.traceInitIndent=-1},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+t+">");var r=nt(e),o=r.time,i=r.value,a=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(n+"<-- <"+t+"> time: "+o+"ms"),this.traceInitIndent--,i}return e()},t}(),Tr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Er=he(fe,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Er);var gr,Ar=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Be,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Rr=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"}(gr||(gr={}));var Or,Nr=function(){function t(t,e){this.definitionErrors=[],this.selfAnalysisDone=!1;var n=this;if(n.initErrorHandler(e),n.initLexerAdapter(),n.initLooksAhead(e),n.initRecognizerEngine(t,e),n.initRecoverable(e),n.initTreeBuilder(e),n.initContentAssist(),n.initGastRecorder(e),n.initPerformanceTracer(e),P(e,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=P(e,"skipValidations")?e.skipValidations:Ar.skipValidations}return t.performSelfAnalysis=function(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")},t.prototype.performSelfAnalysis=function(){var e=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;e.selfAnalysisDone=!0;var r=e.className;e.TRACE_INIT("toFastProps",(function(){tt(e)})),e.TRACE_INIT("Grammar Recording",(function(){try{e.enableRecording(),R(e.definedRulesNames,(function(t){var n=e[t].originalGrammarAction,r=void 0;e.TRACE_INIT(t+" Rule",(function(){r=e.topLevelRuleRecord(t,n)})),e.gastProductionsCache[t]=r}))}finally{e.disableRecording()}}));var o=[];if(e.TRACE_INIT("Grammar Resolving",(function(){o=Nn({rules:y(e.gastProductionsCache)}),e.definitionErrors.push.apply(e.definitionErrors,o)})),e.TRACE_INIT("Grammar Validations",(function(){if(v(o)&&!1===e.skipValidations){var t=In({rules:y(e.gastProductionsCache),maxLookahead:e.maxLookahead,tokenTypes:y(e.tokensMap),errMsgProvider:Ke,grammarName:r});e.definitionErrors.push.apply(e.definitionErrors,t)}})),v(e.definitionErrors)&&(e.recoveryEnabled&&e.TRACE_INIT("computeAllProdsFollows",(function(){var t,n,r=(t=y(e.gastProductionsCache),n={},R(t,(function(t){var e=new Ge(t).startWalking();V(n,e)})),n);e.resyncFollows=r})),e.TRACE_INIT("ComputeLookaheadFunctions",(function(){e.preComputeLookaheadFunctions(y(e.gastProductionsCache))}))),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!v(e.definitionErrors))throw n=T(e.definitionErrors,(function(t){return t.message})),new Error("Parser Definition Errors detected:\n "+n.join("\n-------------------------------\n"))}))},t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();Or=Nr,[Gn,Vn,er,nr,or,rr,ir,ar,fr,yr].forEach((function(t){var e=t.prototype;Object.getOwnPropertyNames(e).forEach((function(n){if("constructor"!==n){var r=Object.getOwnPropertyDescriptor(e,n);r&&(r.get||r.set)?Object.defineProperty(Or.prototype,n,r):Or.prototype[n]=t.prototype[n]}}))}));var Ir=function(t){function e(e,n){void 0===n&&(n=Ar);var r=M(n);return r.outputCst=!0,t.call(this,e,r)||this}return Tr(e,t),e}(Nr),_r=function(t){function e(e,n){void 0===n&&(n=Ar);var r=M(n);return r.outputCst=!1,t.call(this,e,r)||this}return Tr(e,t),e}(Nr);var Sr="\n";function Lr(t){return"\nfunction "+t.name+"(tokenVocabulary, config) {\n    // invoke super constructor\n    // No support for embedded actions currently, so we can 'hardcode'\n    // The use of CstParser.\n    chevrotain.CstParser.call(this, tokenVocabulary, config)\n\n    const $ = this\n\n    "+(T(t.rules,(function(t){return function(t,e){var n=Mr(e,'$.RULE("'+t.name+'", function() {')+Sr;return n+=br(t.definition,e+1),n+=Mr(e+1,"})")+Sr}(t,1)})).join("\n")+"\n\n    // very important to call this after all the rules have been defined.\n    // otherwise the parser may not work correctly as it will lack information\n    // derived during the self analysis phase.\n    this.performSelfAnalysis(this)\n}\n\n// inheritance as implemented in javascript in the previous decade... :(\n")+t.name+".prototype = Object.create(chevrotain.CstParser.prototype)\n"+t.name+".prototype.constructor = "+t.name+"    \n    "}function kr(t,e){var n=Mr(e,"$.OR"+t.idx+"([")+Sr,r=T(t.definition,(function(t){return function(t,e){var n=Mr(e,"{")+Sr;return n+=Mr(e+1,"ALT: function() {")+Sr,n+=br(t.definition,e+1),n+=Mr(e+1,"}")+Sr,n+=Mr(e,"}")}(t,e+1)}));return n+=r.join(",\n"),n+=Sr+Mr(e,"])\n")}function Cr(t,e){if(t instanceof me)return function(t,e){return Mr(e,"$.SUBRULE"+t.idx+"($."+t.nonTerminalName+")"+Sr)}(t,e);if(t instanceof Ee)return Pr("OPTION",t,e);if(t instanceof ge)return Pr("AT_LEAST_ONE",t,e);if(t instanceof Ae)return Pr("AT_LEAST_ONE_SEP",t,e);if(t instanceof Oe)return Pr("MANY_SEP",t,e);if(t instanceof Re)return Pr("MANY",t,e);if(t instanceof Ne)return kr(t,e);if(t instanceof Ie)return function(t,e){var n=t.terminalType.name;return Mr(e,"$.CONSUME"+t.idx+"(this.tokensMap."+n+")"+Sr)}(t,e);if(t instanceof Te)return br(t.definition,e);throw Error("non exhaustive match")}function Pr(t,e,n){var r=Mr(n,"$."+(t+e.idx)+"(");return e.separator?(r+="{\n",r+=Mr(n+1,"SEP: this.tokensMap."+e.separator.name)+","+Sr,r+="DEF: "+xr(e.definition,n+2)+Sr,r+=Mr(n,"}")+Sr):r+=xr(e.definition,n+1),r+=Mr(n,")")+Sr}function xr(t,e){var n="function() {\n";return n+=br(t,e),n+=Mr(e,"}")+Sr}function br(t,e){var n="";return R(t,(function(t){n+=Cr(t,e+1)})),n}function Mr(t,e){return Array(4*t+1).join(" ")+e}var wr=function(){throw new Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\t\nSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_7-0-0")},Ur=Object.freeze({__proto__:null,clearCache:function(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")},Parser:wr,VERSION:d,CstParser:Ir,EmbeddedActionsParser:_r,get ParserDefinitionErrorType(){return gr},EMPTY_ALT:function(t){return void 0===t&&(t=void 0),function(){return t}},Lexer:Qt,get LexerDefinitionErrorType(){return $t},createToken:pe,createTokenInstance:he,EOF:fe,tokenLabel:te,tokenMatcher:function(t,e){return jt(t,e)},tokenName:function(t){return t.name},defaultGrammarResolverErrorProvider:je,defaultGrammarValidatorErrorProvider:Ke,defaultParserErrorProvider:Be,EarlyExitException:wn,isRecognitionException:Pn,MismatchedTokenException:xn,NotAllInputParsedException:Mn,NoViableAltException:bn,defaultLexerErrorProvider:Jt,Alternation:Ne,Alternative:Te,NonTerminal:me,Option:Ee,Repetition:Re,RepetitionMandatory:ge,RepetitionMandatoryWithSeparator:Ae,RepetitionWithSeparator:Oe,Rule:ye,Terminal:Ie,serializeGrammar:_e,serializeProduction:Se,GAstVisitor:Ce,assignOccurrenceIndices:function(t){R(t.rules,(function(t){var e=new Me;t.accept(e),R(e.dslMethods,(function(t){R(t,(function(t,e){t.idx=e+1}))}))}))},resolveGrammar:Nn,validateGrammar:In,createSyntaxDiagramsCode:function(t,e){var n=void 0===e?{}:e,r=n.resourceBase,o=void 0===r?"https://unpkg.com/chevrotain@7.0.3/diagrams/":r,i=n.css;return'\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n'+("\n<link rel='stylesheet' href='"+(void 0===i?"https://unpkg.com/chevrotain@7.0.3/diagrams/diagrams.css":i)+"'>\n")+("\n<script src='"+o+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+o+"src/diagrams_builder.js'><\/script>\n<script src='"+o+"src/diagrams_behavior.js'><\/script>\n<script src='"+o+"src/main.js'><\/script>\n")+'\n<div id="diagrams" align="center"></div>    \n'+("\n<script>\n    window.serializedGrammar = "+JSON.stringify(t,null,"  ")+";\n<\/script>\n")+'\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'},generateParserFactory:function(t){var e=function(t){return"    \n"+Lr(t)+"\nreturn new "+t.name+"(tokenVocabulary, config)    \n"}({name:t.name,rules:t.rules}),n=new Function("tokenVocabulary","config","chevrotain",e);return function(e){return n(t.tokenVocabulary,e,require("../api"))}},generateParserModule:function(t){return function(t){return"\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['chevrotain'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('chevrotain'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.b);\n    }\n}(typeof self !== 'undefined' ? self : this, function (chevrotain) {\n\n"+Lr(t)+"\n    \nreturn {\n    "+t.name+": "+t.name+" \n}\n}));\n"}({name:t.name,rules:t.rules})}}),Dr={NOOP:Symbol("NOOP"),MATCH_ANY:Symbol("MATCH_ANY"),MATCH_WORD:Symbol("MATCH_WORD"),MATCH_TAG:Symbol("MATCH_TAG"),MATCH_METHOD:Symbol("MATCH_METHOD"),MATCH_END:Symbol("MATCH_END"),JMP:Symbol("JMP"),SPLIT:Symbol("SPLIT"),GLOBAL_SAVE:Symbol("GLOBAL_SAVE"),MATCH:Symbol("MATCH"),OGROUP:Symbol("OGROUP"),CGROUP:Symbol("CGROUP"),INCV:Symbol("INCV"),JMP_LT:Symbol("JMP_LT"),SPLIT_LT:Symbol("SPLIT_LT"),LOOKAHEAD:Symbol("LOOKAHEAD"),NEGATIVE_LOOKAHEAD:Symbol("NEGATIVE_LOOKAHEAD")},Fr=ot(Ur),Gr=Fr.EmbeddedActionsParser,Br=Fr.Lexer,jr=Fr.createToken,Kr=Dr.NOOP,Hr=Dr.MATCH_ANY,Wr=Dr.MATCH_TAG,Vr=Dr.MATCH_WORD,Yr=Dr.MATCH_METHOD,zr=Dr.MATCH_END,Xr=Dr.JMP,qr=Dr.SPLIT,$r=Dr.GLOBAL_SAVE,Jr=Dr.MATCH,Zr=Dr.OGROUP,Qr=Dr.CGROUP,to=Dr.INCV,eo=Dr.JMP_LT,no=Dr.SPLIT_LT,ro=Dr.LOOKAHEAD,oo=Dr.NEGATIVE_LOOKAHEAD,io=jr({name:"StartOf",pattern:/\^/}),ao=jr({name:"EndOf",pattern:/\$/}),so=jr({name:"Tag",pattern:/#([_-\w]|\\.)+/}),co=jr({name:"EscapedWord",pattern:/\\[#@]([_-\w]|\\.)+/}),uo=jr({name:"Word",pattern:/([_-\w]|\\.)+/}),lo=jr({name:"Method",pattern:/@[_-\w]+/}),po=jr({name:"Question",pattern:/\?/,longer_alt:uo}),fo=jr({name:"Exclamation",pattern:/!/,longer_alt:uo}),ho=jr({name:"Equals",pattern:/=/,longer_alt:uo}),vo=jr({name:"Pound",pattern:/#/,longer_alt:so}),mo=jr({name:"Dot",pattern:/\./,longer_alt:uo}),yo=jr({name:"Pipe",pattern:/\|/}),To=jr({name:"Comma",pattern:/,/,longer_alt:uo}),Eo=jr({name:"Colon",pattern:/:/,longer_alt:uo}),go=jr({name:"Plus",pattern:/\+/}),Ao=jr({name:"Star",pattern:/\*/}),Ro=jr({name:"Zero",pattern:/0/,longer_alt:uo}),Oo=jr({name:"PositiveInt",pattern:/[1-9]\d*/,longer_alt:uo}),No=jr({name:"LParenthesis",pattern:/\(/}),Io=jr({name:"RParenthesis",pattern:/\)/}),_o=jr({name:"LCurly",pattern:/\{/}),So=jr({name:"RCurly",pattern:/\}/}),Lo=jr({name:"NamedGroupBegin",pattern:/P</}),ko=jr({name:"NamedGroupEnd",pattern:/>/,longer_alt:uo}),Co=jr({name:"WhiteSpace",pattern:/\s+/,group:Br.SKIPPED}),Po=[Lo,ko,Co,io,ao,Ro,Oo,mo,co,uo,lo,so,fo,ho,vo,Eo,po,go,Ao,To,yo,No,Io,_o,So],xo={allTokens:Po,MatchParser:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(r,t);var n=c(r);function r(){var t;e(this,r);var o=a(t=n.call(this,Po));return o.RULE("matchStatement",(function(){var t={startOf:!1,prog:[],endOf:!1};return o.OPTION((function(){o.CONSUME(io),t.startOf=!0})),t.startOf||(t.prog.push({code:$r,value:!1}),t.prog.push({code:qr,locs:[4,2]}),t.prog.push({code:Hr}),t.prog.push({code:Xr,loc:1}),t.prog.push({code:$r,value:!0})),t.groups=[],o.SUBRULE(o.valueStatement,{ARGS:[t.prog,t.groups]}),o.OPTION1((function(){o.CONSUME(ao),t.endOf=!0})),o.ACTION((function(){t.endOf&&t.prog.push({code:zr}),t.prog.push({code:Jr})})),t})),o.RULE("valueStatement",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[];return o.AT_LEAST_ONE({DEF:function(){o.SUBRULE(o.value,{ARGS:[t,e,n]})}}),r})),o.RULE("value",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={code:Kr};t.push(r);var i=t.length;o.OR([{ALT:function(){o.CONSUME(mo),t.push({code:Hr})}},{ALT:function(){t.push({code:Vr,value:o.CONSUME(uo).image})}},{ALT:function(){t.push({code:Vr,value:o.CONSUME(co).image.substr(1)})}},{ALT:function(){t.push({code:Wr,value:o.CONSUME(so).image.substr(1)})}},{ALT:function(){t.push({code:Vr,value:o.CONSUME(Ro).image})}},{ALT:function(){t.push({code:Vr,value:o.CONSUME(Oo).image})}},{ALT:function(){t.push({code:Yr,value:o.CONSUME(lo).image.substr(1)})}},{ALT:function(){o.SUBRULE(o.group,{ARGS:[t,e,n]})}}]),o.OPTION((function(){var e=o.SUBRULE(o.valueModifier),a=e.type,s=e.greedy,c=e.min,u=e.max;switch(a){case"ZERO_OR_ONE":r.code=qr,r.locs=[i,t.length];break;case"ZERO_OR_MORE":t.push({code:Xr,loc:i-1}),r.code=qr,r.locs=[i,t.length];break;case"ONE_OR_MORE":t.push({code:qr,locs:[i,t.length+1]}),s||t[t.length-1].locs.reverse();break;case"RANGE":var l=n.length;n.push(l),t.push({code:to,varId:l});var p={code:eo,varId:l,value:c||0,loc:i},f=null;c===u?0===c?(r.code=Xr,r.loc=t.length):t.push(p):0===(c||0)&&null!==u?(r.code=qr,r.locs=[i,t.length+1],f={code:no,varId:l,value:u,locs:[i,t.length+1]},t.push(f)):null!==c&&null===u?(t.push(p),f={code:qr,locs:[i,t.length+1]},t.push(f)):(t.push(p),f={code:no,varId:l,value:u,locs:[i,t.length+1]},t.push(f)),!s&&f&&f.locs&&f.locs.reverse()}!s&&r.locs&&r.locs.reverse()}))})),o.RULE("valueModifier",(function(){var t={type:null,greedy:!0};return o.OR([{ALT:function(){o.CONSUME(po),t.type="ZERO_OR_ONE"}},{ALT:function(){o.CONSUME(Ao),t.type="ZERO_OR_MORE"}},{ALT:function(){o.CONSUME(go),t.type="ONE_OR_MORE"}},{ALT:function(){var e=o.SUBRULE(o.rangeModifier),n=e.min,r=e.max;o.ACTION((function(){t.type="RANGE",t.min=n,t.max=r}))}}]),o.OPTION((function(){o.CONSUME1(po),o.ACTION((function(){t.greedy=!1}))})),t})),o.RULE("rangeModifier",(function(){var t={min:null,max:null};return o.CONSUME(_o),o.OPTION((function(){o.OR([{ALT:function(){t.min=o.CONSUME(Ro).image}},{ALT:function(){t.min=o.CONSUME(Oo).image}}])})),t.max=t.min,o.OPTION1((function(){o.CONSUME(To),t.max=null,o.OPTION2((function(){t.max=o.CONSUME1(Oo).image}))})),o.ACTION((function(){t.min&&(t.min=parseInt(t.min,10)),t.max&&(t.max=parseInt(t.max,10));var e=t.min,n=t.max;if(e&&n&&e>n)throw new Error("Range min(".concat(e,") must be greater than max(").concat(n,")."));if(null===e&&null===n)throw new Error("Range min or max must be defined.")})),o.CONSUME(So),t})),o.RULE("group",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={capture:!0,name:null,lookahead:!1,negative:!1};o.CONSUME(No),o.OPTION((function(){r=o.SUBRULE(o.groupModifier)}));var i=null;r.lookahead&&(r.capture=!1,i=t,t=[]);var a=e.length;r.capture&&(e.push(r),t.push({code:Zr,id:a,name:r.name}));var s={code:qr,locs:[]};t.push(s);var c=[];o.AT_LEAST_ONE_SEP({SEP:yo,DEF:function(){s.locs.push(t.length),o.SUBRULE(o.valueStatement,{ARGS:[t,e,n]});var r={code:Xr,loc:null};c.push(r),t.push(r)}}),1===s.locs.length&&(s.code=Kr,delete s.locs),t.pop();for(var u=0,l=c;u<l.length;u++){var p=l[u];p.loc=t.length}r.capture&&t.push({code:Qr,id:a,name:r.name}),r.lookahead&&(t.push({code:Jr}),i.push({code:r.negative?oo:ro,prog:t})),o.CONSUME(Io)})),o.RULE("namedGroup",(function(){o.CONSUME(po),o.CONSUME(Lo);var t=o.CONSUME(uo).image;return o.CONSUME(ko),t})),o.RULE("nonCapturingGroup",(function(){o.CONSUME(po),o.CONSUME(Eo)})),o.RULE("negativeLookaheadGroup",(function(){o.CONSUME(po),o.CONSUME(fo)})),o.RULE("positiveLookaheadGroup",(function(){o.CONSUME(po),o.CONSUME(ho)})),o.RULE("commentGroup",(function(){o.CONSUME(po),o.CONSUME(vo)})),o.RULE("groupModifier",(function(){var t={capture:!0,name:null,lookahead:!1,negative:!1,comment:!1};return o.OR([{ALT:function(){o.SUBRULE(o.nonCapturingGroup),t.capture=!1}},{ALT:function(){t.name=o.SUBRULE(o.namedGroup)}},{ALT:function(){o.SUBRULE(o.negativeLookaheadGroup),t.capture=!1,t.lookahead=!0,t.negative=!0}},{ALT:function(){o.SUBRULE(o.positiveLookaheadGroup),t.capture=!1,t.lookahead=!0,t.negative=!1}}]),t})),t.performSelfAnalysis(),t}return r}(Gr)},bo=Dr.NOOP,Mo=Dr.MATCH_ANY,wo=Dr.MATCH_TAG,Uo=Dr.MATCH_WORD,Do=Dr.MATCH_METHOD,Fo=Dr.MATCH_END,Go=Dr.JMP,Bo=Dr.SPLIT,jo=Dr.GLOBAL_SAVE,Ko=Dr.MATCH,Ho=Dr.OGROUP,Wo=Dr.CGROUP,Vo=Dr.INCV,Yo=Dr.JMP_LT,zo=Dr.SPLIT_LT,Xo=Dr.LOOKAHEAD,qo=Dr.NEGATIVE_LOOKAHEAD,$o=function(t,e){return Object.entries(t.tags||{}).filter((function(t){var e=u(t,2);e[0];return e[1]})).map((function(t){return t[0].toLowerCase()})).includes(e.toLowerCase())},Jo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.save,r=void 0===n||n,o=e.saved,i=void 0===o?[]:o,a=e.groups,s=void 0===a?{}:a,c=e.vars,u=void 0===c?{}:c,p=Object.values(s).reduce((function(t,e){return t[e.id]=Object.assign({},e),t[e.id].saved=e.saved.slice(),t}),{});return{pc:t,save:r,saved:l(i),groups:p,vars:Object.assign({},u)}},Zo=function t(e,n,r){var o=e[r.pc];switch(o.code){case jo:r.save=o.value,t(e,n,Jo(r.pc+1,r));break;case bo:t(e,n,Jo(r.pc+1,r));break;case Go:t(e,n,Jo(o.loc,r));break;case Bo:var i,a=h(o.locs);try{for(a.s();!(i=a.n()).done;){var s=i.value;t(e,n,Jo(s,r))}}catch(t){a.e(t)}finally{a.f()}break;case Ho:r.groups[o.id]={id:o.id,name:o.name,saved:[],open:!0},t(e,n,Jo(r.pc+1,r));break;case Wo:r.groups[o.id].open=!1,t(e,n,Jo(r.pc+1,r));break;case Vo:r.vars[o.varId]=(r.vars[o.varId]||0)+1,t(e,n,Jo(r.pc+1,r));break;case Yo:r.vars[o.varId]<o.value?t(e,n,Jo(o.loc,r)):t(e,n,Jo(r.pc+1,r));break;case zo:if(r.vars[o.varId]<o.value){var c,u=h(o.locs);try{for(u.s();!(c=u.n()).done;){var l=c.value;t(e,n,Jo(l,r))}}catch(t){u.e(t)}finally{u.f()}}else t(e,n,Jo(r.pc+1,r));break;default:n.push(r)}},Qo=function(t,e){if(!t.save)return t;var n,r=Object.values(t.groups).filter((function(t){return t.open})).map((function(t){return t.saved})),o=h([t.saved].concat(r));try{for(o.s();!(n=o.n()).done;){n.value.push(e)}}catch(t){o.e(t)}finally{o.f()}return t},ti=function t(e,n){var r=[],o=[],i=!1,a={},s=[],c=Symbol("END");n=n.concat(c),Zo(e,r,Jo(0));for(var u=0;u<n.length&&0!==r.length;u++){for(var l=n[u],p=0;p<r.length;p++){var f=r[p],h=e[f.pc],d=!1;switch(h.code){case Mo:l!==c&&Zo(e,o,Jo(f.pc+1,Qo(f,l)));break;case Uo:l.text&&l.text.toLowerCase()===h.value.toLowerCase()&&Zo(e,o,Jo(f.pc+1,Qo(f,l)));break;case wo:$o(l,h.value)&&Zo(e,o,Jo(f.pc+1,Qo(f,l)));break;case Do:l[h.value]()&&Zo(e,o,Jo(f.pc+1,Qo(f,l)));break;case Fo:l===c&&Zo(e,r,Jo(f.pc+1,f));break;case Xo:t(h.prog,n.slice(u)).found&&Zo(e,r,Jo(f.pc+1,f));break;case qo:t(h.prog,n.slice(u)).found||Zo(e,r,Jo(f.pc+1,f));break;case Ko:s=f.saved,a=f.groups,i=!0,d=!0;break;default:throw new Error("Unsuppored Op code: ".concat(h.code))}if(d)break}r=o,o=[]}return i?{found:i,saved:s,groups:a}:{found:i}},ei=Fr.Lexer,ni=xo.MatchParser,ri=ti,oi=new ei(xo.allTokens),ii=new ni,ai=function(){function t(n){e(this,t),this.errors=n}return r(t,[{key:"toString",value:function(){return"NLP RegexP Parsing error: ".concat(this.message)}},{key:"message",get:function(){return this.errors[0].message}}]),t}(),si=function(){function t(n){if(e(this,t),n.prog)return this.regex=n.regex,void(this.prog=n.prog.slice());var r=oi.tokenize(n).tokens;ii.input=r;var o=null;try{o=ii.matchStatement()}catch(t){throw new ai([t])}if(ii.errors.length>0)throw new ai(ii.errors);this.regex=n,this.prog=o.prog}return r(t,[{key:"exec",value:function(t){switch(t.isA.toLowerCase()){case"doc":return this.execDoc(t);case"phrase":return this.execPhrase(t);default:throw new Error("Invalid type, must be Document or Phrase")}}},{key:"execDoc",value:function(t){var e=this;return t.buildFrom(t.list.map((function(t){return e.execPhrase(t)})).filter((function(t){return null!==t})))}},{key:"execPhrase",value:function(t){var e=ri(this.prog,t.terms()),n=e.found,r=e.saved,o=void 0===r?[]:r,i=e.groups,a=void 0===i?{}:i,s=Object.values(a).reduce((function(t,e){var n=Object.assign({},t);return n[parseInt(e.id,10)]={group:e.name||"".concat(e.id),start:e.saved[0]&&e.saved[0].id||0,length:e.saved.length},n}),{});return n&&o[0]&&o[0].id?t.buildFrom(o[0].id,o.length,s):null}}]),t}(),ci={NLPMatchLexer:oi,parserInstance:ii,NLPRegexParseError:ai,NLPRegexP:si}.NLPRegexP;return function(t,e,n,r){n.preCompile=function(t){return new ci(t)};var o=function(t){return(t=new ci(t)).exec(this)};t.prototype.strictMatch=o,r.prototype.strictMatch=o}}));
