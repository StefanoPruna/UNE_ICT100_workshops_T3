{"version":3,"file":"compromise-hash.js","sources":["../src/hash.js","../src/index.js"],"sourcesContent":["const md5 = require('pure-md5').md5\n\nconst makeHash = function(doc) {\n  let str = doc.text()\n  doc.list.forEach(p => {\n    p.terms().forEach(t => {\n      str += t.pre + (t.implicit || t.text) + t.post\n      str += Object.keys(t.tags).join('')\n    })\n  })\n  return md5(str)\n}\nmodule.exports = makeHash\n","const makeHash = require('./hash')\n\nconst addMethods = function(Doc) {\n  /** generate an md5 hash from the document */\n  Doc.prototype.hash = function() {\n    return makeHash(this)\n  }\n\n  /** compare two documents, by their hashes */\n  Doc.prototype.isEqual = function(b) {\n    return makeHash(this) === makeHash(b)\n  }\n}\nmodule.exports = addMethods\n"],"names":["md5","require$$0","makeHash","doc","str","text","list","forEach","p","terms","t","pre","implicit","post","Object","keys","tags","join","addMethods","Doc","prototype","hash","isEqual","b"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,IAAMA,GAAG,GAAGC,GAAmB,CAACD,GAAhC;;EAEA,IAAME,QAAQ,GAAG,SAAXA,QAAW,CAASC,GAAT,EAAc;EAC7B,MAAIC,GAAG,GAAGD,GAAG,CAACE,IAAJ,EAAV;EACAF,EAAAA,GAAG,CAACG,IAAJ,CAASC,OAAT,CAAiB,UAAAC,CAAC,EAAI;EACpBA,IAAAA,CAAC,CAACC,KAAF,GAAUF,OAAV,CAAkB,UAAAG,CAAC,EAAI;EACrBN,MAAAA,GAAG,IAAIM,CAAC,CAACC,GAAF,IAASD,CAAC,CAACE,QAAF,IAAcF,CAAC,CAACL,IAAzB,IAAiCK,CAAC,CAACG,IAA1C;EACAT,MAAAA,GAAG,IAAIU,MAAM,CAACC,IAAP,CAAYL,CAAC,CAACM,IAAd,EAAoBC,IAApB,CAAyB,EAAzB,CAAP;EACD,KAHD;EAID,GALD;EAMA,SAAOjB,GAAG,CAACI,GAAD,CAAV;EACD,CATD;;EAUA,QAAc,GAAGF,QAAjB;;ECVA,IAAMgB,UAAU,GAAG,SAAbA,UAAa,CAASC,GAAT,EAAc;;EAE/BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,IAAd,GAAqB,YAAW;EAC9B,WAAOnB,IAAQ,CAAC,IAAD,CAAf;EACD,GAFD;;;;EAKAiB,EAAAA,GAAG,CAACC,SAAJ,CAAcE,OAAd,GAAwB,UAASC,CAAT,EAAY;EAClC,WAAOrB,IAAQ,CAAC,IAAD,CAAR,KAAmBA,IAAQ,CAACqB,CAAD,CAAlC;EACD,GAFD;EAGD,CAVD;;SAWc,GAAGL;;;;;;;;"}